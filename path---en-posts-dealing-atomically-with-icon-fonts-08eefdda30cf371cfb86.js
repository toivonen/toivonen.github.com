webpackJsonp([55226808126514],{590:function(n,s){n.exports={data:{post:{id:"/Users/varya/WebDev/Personal/varya.github.com/content/posts/dealing-atomically-with-icon-fonts/index_en.md absPath of file >>> MarkdownRemark",html:'<p>My recent huge project was developing a library of CSS and JavaScript components for sharing this code across a lot of\nweb services and mobile apps. In most cases such work brings up question about how to avoid blocking the processes.</p>\n<p>The library has its own flow, and obviously the new things can only appear in new versions. Although I made my best to\nprovide fast releases, and so the library has them 2-3 times a week, it is still understandable that the library\ncustomers sometimes cannot wait even an hour.</p>\n<p>I belive that one of the must-haves of UI library is the freedom which it should give to its customers. You can easily\nprovide this if practice atomic approach everythere. For example, for the icon fonts.</p>\n<excerpt/>\n<h3>Solid piece</h3>\n<p>Soon or not SVG will conquer the world. But now we still have icon fonts in some projects. The same story was with that\nlibrary.</p>\n<p>However the icon font perfectly suited for the displaying icons onto the web pages, it was integration and flow which\ncreated the problem. All the icons fit into one font file (well, in 4 different formats):</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">src/\n  fonts/\n    iconfont.eot\n    iconfont.svg\n    iconfont.ttf\n    iconfont.woff</code></pre>\n      </div>\n<p>Also the library provided CSS to make the icon-symbol matching:</p>\n<div class="gatsby-highlight" data-language="scss">\n      <pre class="language-scss"><code class="language-scss"><span class="token selector">.icon </span><span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token variable">$global-font-icon</span><span class="token punctuation">;</span>\n  <span class="token selector"><span class="token parent important">&amp;</span>:before </span><span class="token punctuation">{</span>\n    <span class="token comment">/* Some common icon stuff */</span>\n  <span class="token punctuation">}</span>\n  <span class="token selector"><span class="token parent important">&amp;</span>--support </span><span class="token punctuation">{</span>\n    <span class="token selector"><span class="token parent important">&amp;</span>:before </span><span class="token punctuation">{</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"a"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token selector"><span class="token parent important">&amp;</span>--chat </span><span class="token punctuation">{</span>\n    <span class="token selector"><span class="token parent important">&amp;</span>:before </span><span class="token punctuation">{</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"b"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  ...\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>Customers get the library as a bower or npm package. When they need a new icon to be in the set, they might request this\nand wait for the package to update. As usual, the fastest way to get something happened is to do this yourself. So, it\npossible to contribute and even release yourself. But still any further change would need you to go through the\ndevelopment process.</p>\n<h3>Atomic and buildable</h3>\n<p>Often you need to divide into smaller pieces in order to make things more mantainable. The same goes with icons. In the\nlibrary we changed it so that the source is now a set of SVG files:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">src/\n  icons/\n    1000-support.svg\n    1010-chat.svg\n    1020-users.svg</code></pre>\n      </div>\n<p>The file names are important, these words are used to generate the CSS classes, which are the API for the customer.\nNumbers are for the right order. If building the icon system from very beginning, they are not needed. But in the\nlibrary case I wanted backward compatibility.</p>\n<p>Then, these icons are built into the same icon fonts with <code class="language-text">gulp-iconfont</code> plugin:</p>\n<div class="gatsby-highlight" data-language="js">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gulp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> iconfont <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gulp-iconfont"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> consolidate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gulp-consolidate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> sourcePath <span class="token operator">=</span> <span class="token string">"src/"</span><span class="token punctuation">;</span>\n\ngulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">"build:icons"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sourcePath <span class="token operator">+</span> <span class="token string">"/icons/*.svg"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">iconfont</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        fontName<span class="token punctuation">:</span> <span class="token string">"myicons"</span><span class="token punctuation">,</span>\n        formats<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"ttf"</span><span class="token punctuation">,</span> <span class="token string">"eot"</span><span class="token punctuation">,</span> <span class="token string">"woff"</span><span class="token punctuation">,</span> <span class="token string">"svg"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        centerHorizontally<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        fixedWidth<span class="token punctuation">:</span> <span class="token boolean">true</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"glyphs"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>glyphs<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\n        glyphs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>icon<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          icon<span class="token punctuation">.</span>name <span class="token operator">=</span> icon<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\\d+\\-/g</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>sourcePath <span class="token operator">+</span> <span class="token string">"/icons/util/*.scss"</span><span class="token punctuation">)</span> <span class="token comment">// Template</span>\n            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">consolidate</span><span class="token punctuation">(</span><span class="token string">"lodash"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n                glyphs<span class="token punctuation">:</span> glyphs<span class="token punctuation">,</span>\n                fontName<span class="token punctuation">:</span> <span class="token string">"myiconfont"</span><span class="token punctuation">,</span>\n                fontPath<span class="token punctuation">:</span> <span class="token string">"../fonts/"</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>sourcePath <span class="token operator">+</span> <span class="token string">"/scss/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>sourcePath <span class="token operator">+</span> <span class="token string">"/fonts/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>Besides the icon files this task needs the templates to produce the CSS (or SCSS, as in this case) which makes the\nsymbol-class matching. I found it logical to store it together with the icon files:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">src/\n  icons/\n    utils/\n      iconfont__icons.scss\n      iconfont__variables.scss</code></pre>\n      </div>\n<p>It’s possible to manage with one template only, but for even more flexibility I have two. The main one makes the\nclasses:</p>\n<div class="gatsby-highlight" data-language="css">\n      <pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> $global-font-icon<span class="token punctuation">;</span>\n  <span class="token property">src</span><span class="token punctuation">:</span><span class="token url">url("&lt;%= fontPath %>&lt;%= fontName %>..eot")</span><span class="token punctuation">;</span>\n  <span class="token property">src</span><span class="token punctuation">:</span><span class="token url">url("&lt;%= fontPath %>&lt;%= fontName %>.?#iefix")</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"embedded-opentype"</span><span class="token punctuation">)</span>,\n    <span class="token url">url("&lt;%= fontPath %>&lt;%= fontName %>.woff")</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"woff"</span><span class="token punctuation">)</span>,\n    <span class="token url">url("&lt;%= fontPath %>&lt;%= fontName %>.ttf")</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"truetype"</span><span class="token punctuation">)</span>,\n    <span class="token url">url("&lt;%= fontPath %>&lt;%= fontName %>.#&lt;%= fontName %>")</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"svg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.icon</span> <span class="token punctuation">{</span>\n  <span class="token property">font-family</span><span class="token punctuation">:</span> $global-font-icon<span class="token selector">;\n\n  &amp;:before</span> <span class="token punctuation">{</span>\n    <span class="token comment">/* Some common icon stuff */</span>\n  <span class="token punctuation">}</span>\n<span class="token selector">&lt;% _.each(glyphs, function(glyph)</span> <span class="token punctuation">{</span> <span class="token selector">%>\n  &amp;.--&lt;%= glyph.name %></span> <span class="token punctuation">{</span>\n    <span class="token selector">&amp;:before</span> <span class="token punctuation">{</span>\n      <span class="token property">content</span><span class="token punctuation">:</span> $icon--&lt;%= glyph.name %><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>&lt;% <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> %>\n\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>And another one makes the varibles:</p>\n<div class="gatsby-highlight" data-language="css">\n      <pre class="language-css"><code class="language-css"><span class="token selector">&lt;% _.each(glyphs, function(glyph)</span> <span class="token punctuation">{</span> %>\n$icon-&lt;%= glyph.name %><span class="token punctuation">:</span> <span class="token string">"\\&lt;%= glyph.unicode[0].charCodeAt(0).toString(16).toUpperCase() %>"</span> !default<span class="token punctuation">;</span>\n&lt;% <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> %></code></pre>\n      </div>\n<p>Running the task produces the fonts and 2 generic SCSS files:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">src/\n  font/\n    iconfont.eot\n    iconfont.svg\n    iconfont.ttf\n    iconfont.woff\n  scss/\n    icons.scss // Not generic\n    iconfont__icons.scss\n    iconfont__variables.scss</code></pre>\n      </div>\n<p>In the <code class="language-text">icons.scss</code>, which is normal SCSS file, the result is requested:</p>\n<div class="gatsby-highlight" data-language="css">\n      <pre class="language-css"><code class="language-css">// Icons\n//\n// Lists all the icons that are used in the services.\n//\n// Styleguide 5\n\n<span class="token atrule"><span class="token rule">@import</span> <span class="token string">"iconfont__variables.scss"</span><span class="token punctuation">;</span></span>\n<span class="token atrule"><span class="token rule">@import</span> <span class="token string">"iconfont__icons.scss"</span><span class="token punctuation">;</span></span></code></pre>\n      </div>\n<h3>Extend on fly</h3>\n<p>The variables may be redefined on the customer’s side. This makes is a fast way to change the icon, if the replacement\nalready sit in the font bundle.</p>\n<p>If not, it is almost zero amout of work to implement this build-from-atoms process on the customer side.</p>\n<p>The customer has all the library code, let’s say in <code class="language-text">bower_components</code>, and can have its own folder of icons:</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">bower_components/\n  ui-library/\n    dist/\n      icons/\n      scss/\nsrc/\n  icons/\n    2000-rabbit.svg\n    2010-gift.svg</code></pre>\n      </div>\n<p>When building the font they need to use both their set of icons and the library icons:</p>\n<div class="gatsby-highlight" data-language="js">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> sourcePath <span class="token operator">=</span> <span class="token string">"src/"</span><span class="token punctuation">;</span>\n\ngulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">"build:icons"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sourcePath <span class="token operator">+</span> <span class="token string">"/icons/*.svg"</span><span class="token punctuation">,</span> <span class="token string">"bower_components/ui-library/dist/icons/*.svg"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">iconfont</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        <span class="token comment">/* The same as above */</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"glyphs"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>glyphs<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\n        gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">"bower_components/ui-library/dist/icons/util/*.scss"</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">consolidate</span><span class="token punctuation">(</span><span class="token string">"lodash"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n                <span class="token comment">/* The same as above */</span>\n            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>sourcePath <span class="token operator">+</span> <span class="token string">"/scss/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>sourcePath <span class="token operator">+</span> <span class="token string">"/fonts/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>\n      </div>\n<p>It is not even needed to implement template for the output SCSS, it comes in the library dist.</p>\n<p>With such a flow a UI library customer stays completely independent from the library release cycle and may bring a new\nicon into her product as soon as the atomic SVG file is copied into the needed folder. As a background process it is\nneeded to contribute the same icon into the library, but not necessarily the same moment. And even the contributing\nprocess is changed to be better because it came to adding an SVG file.</p>\n<p>As other atomical things, such font flow makes git history more useful. Now it is easier to see\nif the provided change affected many or just one icon. Also, SVG images are rendered nicely in pull requests.</p>\n<p>Even simultaneous changes of the icons in both library and customer websites are possible and should not cause any\nconflict.</p>\n<p>And the last but not least nice thing: all the icons are now in the library as SVG files. Hopefully later we come up\nwith using next century technologies and not the icons fonts. When this sweet moment comes, half of the work will have\nbeen done :-)</p>',fields:{slug:"en/posts/dealing-atomically-with-icon-fonts/",prefix:"",disqusIdentifier:"posts-dealing-atomically-with-icon-fonts-index-en"},frontmatter:{title:"Dealing atomically with icon fonts",date:"10 November 2015",v2:!0,old:null,tumblr:null,meta:{desc:'Fixing the "using UI library" workflow with building icon fonts from atomic SVG icons. The library has its own flow, and obviously the new things can only appear in new versions. However the library customers sometimes cannot wait even an hour. With the atomic builds you can easily provide library customer with the freedom to modify everything. Even icon fonts.\n'},cover:{childImageSharp:{resize:{src:"/static/thumb-5ff1b90224ede4179ee3616d1d5da5ee-160fa.png"}}}}},authornote:{id:"/Users/varya/WebDev/Personal/varya.github.com/content/parts/author.md absPath of file >>> MarkdownRemark",html:'<p><strong>Mr. Gatsby</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href="/">bibendum</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. Blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus.</p>'},site:{siteMetadata:{siteUrl:"http://varya.me/"}}},pathContext:{slug:"en/posts/dealing-atomically-with-icon-fonts/",prev:{id:"/Users/varya/WebDev/Personal/varya.github.com/content/posts/docpad-with-bem-taste/index_en.md absPath of file >>> MarkdownRemark",fields:{slug:"en/posts/docpad-with-bem-taste/",prefix:"",lang:"en",disqusIdentifier:"posts-docpad-with-bem-taste-index-en"},frontmatter:{title:"Docpad with the taste of BEM",old:null}},next:{id:"/Users/varya/WebDev/Personal/varya.github.com/content/posts/borschik-static-assets/index_ru.md absPath of file >>> MarkdownRemark",fields:{slug:"ru/posts/borschik-static-assets/",prefix:"",lang:"ru",disqusIdentifier:"ru-issues-borschik-static-assets"},frontmatter:{title:"Локальная разработка и удаленный хостинг статики",old:!0}}}}}});
//# sourceMappingURL=path---en-posts-dealing-atomically-with-icon-fonts-08eefdda30cf371cfb86.js.map