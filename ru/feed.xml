<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Untitled RSS Feed]]></title><description><![CDATA[Untitled RSS Feed]]></description><link>http://varya.me/ru</link><generator>metalsmith-feed</generator><lastBuildDate>Wed, 27 Sep 2017 11:07:12 GMT</lastBuildDate><atom:link href="http://varya.me/ru/feed.xml" rel="self" type="application/rss+xml"/><item><title><![CDATA[Конференции ScotlandCSS и ScotlandJS. Организация]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Конференции ScotlandCSS и ScotlandJS. Организация</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Конференции ScotlandCSS и ScotlandJS. Организация" property="og:title"/>
        <meta content="В этом году я принимала участие в организации конференций ScotlandCSS и ScotlandJS вместе с замечательным шотландским комьюнити. Это очень интересный опыт — я увидела западную конференцию изнутри (там всё не так) и получила опыт как нигде больше.
" property="og:description"/>
        <meta content="http://varya.me/ru/posts/scotland-css-and-js-2016/" property="og:url"/>
        <meta content="http://varya.me/posts/scotland-css-and-js-2016/thumb.jpg" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Конференции ScotlandCSS и ScotlandJS. Организация</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 6/27/2016</span><div><p>В этом году я принимала участие в организации конференций ScotlandCSS и ScotlandJS вместе
с замечательным шотландским комьюнити. Это очень интересный опыт — я увидела западную
конференцию изнутри (там всё не так) и получила опыт как нигде больше.</p>
<excerpt/>
<p>Я познакомилась с командой конференции год назад, когда выступала на ScotlandJS 2015, а  в этом
году мне предложили участие в качестве волонтёра. Я никогда ещё не подходила к западной конференции
так близко, и к тому же была единственным неместным членом команды, поэтому для меня всё было
очень необычно и очень интересно. Расскажу просто по порядку.</p>
<p>Работа начинается задолго до дня X. Это не первая шотландская конференция, так что нам не понадобилось
делать сайт и систему голосования для выбора докладов. Кстати, одна из особенностей этой конференции —
все заявки от докладчиков видны участникам конференции, купившим билеты. Участники могут проголосовать,
и в программу попадают самые популярные доклады. У организаторов и волонтёров тоже есть право голоса.</p>
<p>Когда все доклады определены, начинается работа со спикерами. Из-за удаленности я не принимала участия
в утряске вопросов про зал, отель, еду, но работала с докладчиками. Мы делали 3-дневное мероприятие:
1 день ScotlandCSS и 2 дня — ScotlandJS, поэтому докладчиков было много. С каждым докладчиком мы готовили
интервью для публикации на сайте. Докладчиков распределили среди волонтёров, волонтёр сам организовывал
интервью. Я использовала Skype для записи, а затем расшифровывала вручную. Расшифровывать очень долго
и трудно, тем более что мне достались докладчики с акцентами. Я пробовала различные средства автоматической
расшифровки, но из за акцентов и специальной лексики они все бесполезны. Готовое интервью отправлялось на
утверждение к докладчику. Я использовала Google Docs, потому что ребята вносили свои правки. Готовые
интервью публиковались на сайте конференции.</p>
<p>Вот получившиеся у меня интервью:</p>
<ul>
<li><a href="http://scotlandcss.com/2016/04/04/interview-with-christoph-reinartz/">Christoph Reinartz</a></li>
<li><a href="http://scotlandjs.com/2016/05/10/interview-with-silvia-pina/">Silvia Pina</a></li>
<li><a href="http://scotlandjs.com/2016/05/22/interview-with-robin-mehner/">Robin Mehner</a></li>
</ul>
<p>В последнем интервью есть даже фото двух котиков.</p>
<p>В Эдинбург я приехала за день до конференции. Работа волонтёра начинается рано утром, да и накануне вечером
была общая встреча команды конференции и докладчиков. Мы ходили в кружок кельтских танцев и затем в бар.</p>
<p>Насчёт танцев я волновалась, потому что они явно не в числе моих талантов. Но всё оказалось непринужденно:
многие как и я не умели танцевать, а завсегдатаи кружка (шотландские дедушки в килтах) доходчиво всё
объясняли. Оказалось несложно. Но видео нет. Наверное, &quot;слава Богу&quot;.</p>
<p>Следующиюще 3 дня проходила конференция. Каждое утро команда была на месте в 7:30. На входе для нас уже были расставлены столы и
все необходимые вещи лежали там же. Нашей работой было развесить баннеры, разложить по алфавиту бейджи,
выложить наклейки.</p>
<p><a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626528" target="_blank"><img src="https://img-fotki.yandex.ru/get/25232/14441195.4c/0_98f60_16a19a01_L.jpg" width="500" height="375" border="0" title="IMG_2894.jpg" alt="IMG_2894.jpg"/></a></p>
<p>Бейджи несовершеннолетних участников надо было обвести красным маркером. Точно не знаю, зачем это было нужно.
Возможно, британское законодательство требует к ним особого обращения. Например, не предлагать алкоголь.</p>
<p>Бейджи мы раздавали участникам, когда они подходили к столу и представлялись. Для меня это было довольно
сложно — нужно было очень хорошо слышать, как человек называет своё имя. Причём, некоторые называли имя,
а некоторые — фамилию. Хорошо бы сразу знать типичные английские и шотландские имена и фамилии, чтобы
быстро соориентироваться. Дело осложняется ещё и тем, что многие имена пишутся не так как слышатся.</p>
<p>Вместе с бейджем мы давали наклейки, листок спонсорской рекламы, объясняли, где находится зал, где туалеты,
где можно попить кофе.</p>
<p>Для бейджей участникам предлагалось выбрать цвет веревочки. Стандарный или фиолетовый. Фиолетовый цвет
означал несогласие быть на общих фотографиях. Фотограф старался, чтобы такие люди не попали в кадр. А
если они попадали, при обработке эти кадры выбраковывались.</p>
<p>Рядом с welcome desk мы установили транспоранты. Один с программой текущего дня конференции (он менялся
каждый день).</p>
<p><a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626533" target="_blank"><img src="https://img-fotki.yandex.ru/get/54004/14441195.4c/0_98f65_1e9f875d_L.jpg" width="375" height="500" border="0" title="IMG_2903.jpg" alt="IMG_2903.jpg"/></a></p>
<p>Второй — с code of conduct и инклюзивными принципами конференции.</p>
<p><a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626534" target="_blank"><img src="https://img-fotki.yandex.ru/get/53078/14441195.4c/0_98f66_ecf5372b_L.jpg" width="375" height="500" border="0" title="IMG_2904.jpg" alt="IMG_2904.jpg"/></a></p>
<p>Эта конференция в моём опыте была самая инклюзивная: и по тематике докладов, и по составу участников
(были и трансгендеры, и non-binary, все расы, и т.д). Инклюзивности и соблюдению code of conduct
придавалось особое внимание. Перед конференцией волонтёры проходили тренинг о предотвращении конфликтных
ситуаций, и был целый протокол, как в них действовать, и как команда координируется.</p>
<p>В женском туалете для общего пользования были дезодорант, влажные салфетки, 2 разные пачки тампонов,
2 пачки прокладок. Про мужской туалет ничего не могу сказать, а про женский знаю, что это именно от
конференции, потому что сама раскладывала. Так же понадобилось временно убрать всё на 1 час, когда в
музее (то же самое здание) была детская экскурсия, чтобы дети не баловались. В целом мне очень понравилась
эта идея с вниманием к мелочам. Бюджет на туалетные принадлежности составил меньше 10 фунтов, и у
многих людей появилось ощущение заботы о них.</p>
<p><a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626532" target="_blank"><img src="https://img-fotki.yandex.ru/get/105980/14441195.4c/0_98f64_6ed8ba7f_L.jpg" width="375" height="500" border="0" title="IMG_2902.jpg" alt="IMG_2902.jpg"/></a></p>
<p>У каждого докладчика был свой speaker buddy из числа волонтёров. То есть каждый волонтёр отвечал за
нескольких докладчиков. Это очень удобно для организаторов, не нужно держать фокус сразу на всех. Buddy
следит за тем, чтобы докладчик вовремя появился на конференции, находит время для проверки его/её слайдов
на большом экране, и всячески помогает. Быть speaker buddy несложно, но иногда надо делать неожиданные
вещи. Одна из моих спикеров пришла довольно поздно, за 10 минут до своего доклада и с немного осипшим
голосом. Она была уверена, что ей поможет горячий чай, поэтому мне пришлось его добыть, а для этого —
перевести переговоры с кейтерингом. Сначала они не хотели наливать чай не во время перерыва, ведь организаторы
за это не платили. Но в итоге мне удалось их уговорить :-)</p>
<p>Кроме работы со спикерами волонтёры дежурили на входе, у welcome desk. С утра, во время регистрации — все
вместе, а в течение конференции — по сменам. Кроме выдачи бейджи для опоздавших, волонтёрам на входе
нужно реагировать на нестандартные ситуации. У меня было две запомнившиеся:</p>
<p>Посетительница музея заинтересовалась баннером с принципами конференции. Попросила объяснить ей, что такое
&quot;misogyny&quot;. Мне кажется, я объяснила.</p>
<p>Второй инцидент был с пакистанской (предположительно) бабушкой, скорее всего тоже пришедшей в музей.
Она хотела взять несколько бейджей, ещё ожидавших участников. Но мне удалось обменять их на пустые
бейджи и наклейку. Бабушка ушла довольная.</p>
<p>Также дежурные волонтёры обычно координируют команду для решения проблем участников и докладчиков.
Люди приходили со своими проблемами на welcome desk. Дежурному нельзя покидать место, но организовать
решение проблемы, сообщив нужным членам команды и скоординировав их.</p>
<p>У волонтёров были футболки в цвет конференции, с именем на спине. Каждый день футболка выдавалась новая.</p>
<p><a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626529" target="_blank"><img src="https://img-fotki.yandex.ru/get/151986/14441195.4c/0_98f61_d80fb428_M.jpg" width="300" height="225" border="0" title="IMG_2900.jpg" alt="IMG_2900.jpg"/></a>
<a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626530" target="_blank"><img src="https://img-fotki.yandex.ru/get/59186/14441195.4c/0_98f62_1dc9c0e9_M.jpg" width="300" height="225" border="0" title="IMG_2911.jpg" alt="IMG_2911.jpg"/></a>
<a href="https://fotki.yandex.ru/next/users/toivonens/album/165318/view/626531" target="_blank"><img src="https://img-fotki.yandex.ru/get/98813/14441195.4c/0_98f63_c9e1cd09_M.jpg" width="300" height="225" border="0" title="IMG_2924.jpg" alt="IMG_2924.jpg"/></a></p>
<p>С размером, хотя мы его определяли удаленно, повезло. И ещё мне понравилось, что логотип впереди был
некрупный и не посередине груди.</p>
<p>Мне удалось послушать немного докладов. Те выступления, что выпали на время моих дежурств или работы со спикерами,
я пропустила. Но удалось захватить некоторые интересные вещи:</p>
<ul>
<li>Large scale CSS refactoring, Christoph Reinartz</li>
<li>Overcoming the challenges of mentoring, Kim Crayton</li>
<li>How to ask about gender, Chad Gowler</li>
<li>Open open source, Charlotte Spenser</li>
</ul>
<p>Когда будет доступно видео этих докладов, я обязательно им поделюсь в Твиттере.</p>
<p>Подводя итог, конференция необычная и интересная. Особенно замечательно то, что это мероприятие
локального сообщества, а значит - самое место для знакомств, которые вы не сможете завести нигде больше.</p>
<ul>
<li><a href="http://scotlandcss.com/">ScotlandCSS</a></li>
<li><a href="http://scotlandjs.com/">ScotlandJS</a></li>
</ul>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/scotland-css-and-js-2016';
        window.disqus_identifier = 'posts-scotland-css-and-js-2016-index-ru';
        window.disqus_title = 'Конференции ScotlandCSS и ScotlandJS. Организация';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Конференции ScotlandCSS и ScotlandJS. Организация">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/scotland-css-and-js-2016/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/scotland-css-and-js-2016/</link><guid isPermaLink="true">http://varya.me/ru/posts/scotland-css-and-js-2016/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Mon, 27 Jun 2016 00:00:00 GMT</pubDate></item><item><title><![CDATA[Стайл гайд для самых маленьких]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Стайл гайд для самых маленьких</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Стайл гайд для самых маленьких" property="og:title"/>
        <meta content="Стайл гайд для самых маленьких" property="og:description"/>
        <meta content="http://varya.me/ru/posts/sc5-styleguide-for-smallers/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/sc5-styleguide-for-smallers/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Стайл гайд для самых маленьких</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 8/18/2015</span><div><p>В этом году у меня было несколько презентаций про <a href="http://styleguide.sc5.io/">SC5 Style Guide</a>, в которых
я делилась опытом использования инструмента на проектах одного их наших клиентов — мобильного оператора Elisa.
Учитывая, что Elisa — огромная компания с массой вебсайтов, на которых нужно поддерживать единый стиль, не
удивительно, что SC5 Style Guide как инструмент там очень полезен. Но как насчет небольших проектов? Стоит ли для них
делать стайл гайды? Я сама не знала ответ на этот вопрос и захотела поэкспериментировать. В качестве подопытного
сайта взяла собственный блог.
<excerpt/></p>
<p>Живой стайл гайд моего блога выглядит вот так: <a href="http://varya.me/styleguide">varya.me/styleguide</a>. Вы можете видеть
весь интерфейс, разделенный на блоки, каждый из которых подразумевает самостоятельный компонент. Я до сих пор не
смотрела на интерфейс своего блога в таком ключе, и это заставляет меня даже пересмотреть CSS-архитектуру проекта. Но
давайте обо всём по порядку.</p>
<h2>Настройка SC5 Style Guide</h2>
<p>Всё начинается с установки пакета</p>
<pre><code>npm install --save-dev sc5-styleguide
</code></pre>
<p>После этого я смогла сгенерировать веб-сайт стайл гайда. Для этого понадобилась
<a href="https://github.com/varya/varya.github.com/blob/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/Gulpfile.js">парочка gulp тасков</a>.</p>
<p>Мне нужно было немного отступить от конфигурации, которая предлагается в документации, чтобы решить свои задачи. Напишу
об этом подробно.</p>
<h3>Использование параметра <code>appRoot</code></h3>
<p>Мой стайл гайд находится не в корне домена, а в папке, которая называется <code>styleguide</code>. Об этом нужно сообщить
инструменту, чтобы сгенерированное им приложение использовало верные ссылки:</p>
<pre><code class="language-js">gulp.task(&quot;styleguide:generate&quot;, function() {

  return gulp.src([&quot;desktop.blocks/**/*.css&quot;])
    .pipe(styleguide.generate({
      title: &quot;Varya.me Styleguide&quot;,
      appRoot: '/styleguide',
      ...
</code></pre>
<h3>Подключение JavaScript</h3>
<p>В качестве значения параметра <code>extraHead</code> можно перечислить все, что нужно подключить к странице. У меня для некоторых
компонент требуется JavaScript. Конечно, не обязательно делать так, чтобы он работал, можно просто делать стайл гайд
только на базе CSS. Но мне хотелось, чтобы компоненты в документации выглядели бы абсолютно так же как в блоге. И
благодаря <code>extraHead</code> я могу указать, какой JavaScript файл нужен.</p>
<pre><code class="language-js">gulp.task(&quot;styleguide:generate&quot;, function() {

  return gulp.src([&quot;desktop.blocks/**/*.css&quot;])
    .pipe(styleguide.generate({
      title: &quot;Varya.me Styleguide&quot;,
      ...
      extraHead: [
        '&lt;script src=&quot;http://yandex.st/jquery/1.7.2/jquery.min.js&quot;&gt;&lt;/script&gt;',
        '&lt;script src=&quot;/desktop.bundles/index/index.min.js&quot;&gt;&lt;/script&gt;',
        ...
      ]
    ...
</code></pre>
<p>Но на самом деле нужна ещё одна хитрость. Мои компоненты написаны на <code>i-bem.js</code> и автоматически инициализируются по
<code>domReady</code>. Это как раз то что нужно для блога, ведь страницы статические и вся HTML-разметка сразу загружается. Но сайт
стайл гайда — это SPA (одностраничное приложение), и там это не работало. Компоненты отрисовываются на страницах
стайлгайда &quot;на лету&quot;, и очевидно, что это происходит позже <code>domReady</code>. То есть они не инициализируются автоматически.
К счастью, можно использовать событие <code>styleguide:onRendered</code> на объекте <code>window</code>, которое SC5 Style Guide создаёт
каждый раз, когда компонент перересовывается. Я сделала инициализацию компонент на это событие, то есть сразу после того
как они появляются на странице. Такая инициализация нужна только на сайте стайл гайда, поэтому этот код не включается
в общую сборку и подключается к стайл гайду как дополнительный файл.</p>
<pre><code>gulp.task(&quot;styleguide:generate&quot;, function() {

  return gulp.src([&quot;desktop.blocks/**/*.css&quot;])
    .pipe(styleguide.generate({
      title: &quot;Varya.me Styleguide&quot;,
      ...
      extraHead: [
        ...
        '&lt;script src=&quot;/styleguide/i-bem__init_styleguide.js&quot;&gt;&lt;/script&gt;'
      ]
    ...
</code></pre>
<p>Вы можете посмотреть, как работают компоненты с JavaScript на примере блока, который показывает список репозиториев
на GitHub после того как сделает запрос в GitHub API:
<a href="http://varya.me/styleguide/#/section/4.3">varya.me/styleguide/#/section/4.3</a>. Или на странице блока с кружочками,
которые генерируются случайным образом: <a href="http://varya.me/styleguide/#/section/5.1">varya.me/styleguide/#/section/5.1</a>.</p>
<p>И последняя, очень важная деталь для того, чтобы заставить JavaScript работать — это использование параметра
<code>disableEncapsulation: true</code>. По умолчанию Style Guide оборачивает каждый компонент в ShadowDOM. Это даёт разработчику
возможность не беспокоиться о том, что его стили пересекутся со стилями сгенерированного веб-сайта. Но в то же время
это инкапсулирует компонент, в том числе и от JavaScript, подключённого в <code>&lt;head&gt;</code>. Но благодаря специальному параметру
эту инкапсуляцию можно предотвратить. Так что у меня компоненты просто вставляются в HTML-код сайта как есть. Что
касается возможности перезаписать стили сайта, этого не случится. Я использую БЭМ, поэтому все компоненты уже
&quot;инкапсулированы&quot; на уровне методологии.</p>
<h3>Стайл гайд как статическая страница</h3>
<p>Для режима разработки у SC5 Style Guide запускается сервер, который разруливает все пути в корневой каталог, откуда и
раздаётся сгененированный SPA-сайт. Если вы хотите пользоваться результатом в своём сервере, о такой маршрутизации
придется позаботиться самостоятельно. Но в моём случае сайт располагается на GitHub Pages, это статический хостинг и там
никакой маршрутизации не предусмотрено. Однако на этот случай есть настройка <code>disableHtml5Mode: true</code>. Она говорит
генератору, что в приложении должны быть старые добрые ссылки с решеткой <code>#</code>. Так что всё работает.</p>
<h2>Документирование компонент</h2>
<p>Ещё до внедрения стайл гайда, у меня весь CSS был написан по БЭМ, то есть с компонентым подходом. Для стайл гайда нужно
было только задать компонентам структуру и задокументировать блоки при помощи KSS.</p>
<h3>Структурирование кода</h3>
<p>Оказалось, что файловая структура, которую предлагает БЭМ, не самое лучшее решение для разработки живого стайлгайда. На
файловой системе все компоненты представлены длинным плоским списком:</p>
<pre><code>desktop.blocks/
├── article
├── articles-list
├── box
├── ...
└── text
</code></pre>
<p><a href="https://github.com/varya/varya.github.com/tree/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/desktop.blocks">github/varya/varya.github.com/desktop-blocks</a></p>
<p>То есть маленькие атомарные компоненты никак не отличаются от блоков для структуры страницы (таких как Header или
Footer), от блоков из сайдбара или от CSS для сторонних виджетов. Разумеется, плоская структура более удобна для
сборщиков, но с точки зрения разработки нужна какая-то каталогизация.</p>
<p>Для этого я сделала файл <code>overview.css</code>, в котором нет никакого активного CSS, но он помогает мне организовать блоки.
У меня там 5 секций, и в каждой относящиеся к ней компоненты:</p>
<pre><code>/*
Atoms

Styleguide 1

styleguide:ignore:start

@import url(&quot;logo/logo.css&quot;); // 1.1
@import url(&quot;text/text.css&quot;); // 1.2
...

styleguide:ignore:end
*/

/*
Main blocks

Styleguide 2

styleguide:ignore:start

@import url(&quot;header/header.css&quot;); // 2.1
...

styleguide:ignore:end
*/
</code></pre>
<p><a href="https://github.com/varya/varya.github.com/blob/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/desktop.blocks/overview.css">github/varya/varya.github.com/desktop-blocks/overview.css</a></p>
<p>По сути в файле кроме комментариев ничего нет. А в комментариях — описание каждой секции. Также перечислены
файлы блоков, имеющие к ней отношение. Это удобно для навигации по коду. В этом перечислении я использовала <code>@import</code>
(просто потому что могу).</p>
<p>Здесь только одна особенность — использование волшебных комментариев <code>styleguide:ignore:start</code> и
<code>styleguide:ignore:end</code>. Ими можно обернуть любой кусок CSS (SASS или LESS) кода и таким образом сказать генератору SC5
Style Guide, что этот кусок нужно проигнорировать.</p>
<p>Я игнорирую свои списки блоков, потому что они никак не влияют на код. Но описания секций остаются.</p>
<h3>Описание блоков</h3>
<p>Все остальное легко. Перед каждым компонентом я размещаю комментарий с KSS описанием. Например, один из простых блоков,
Logo:</p>
<pre><code class="language-css">/*

Logo

markup:
&lt;logo class=&quot;logo&quot;&gt;···&lt;b class=&quot;var&quot;&gt;var&lt;/b&gt;·&lt;b class=&quot;ya&quot;&gt;ya&lt;/b&gt;;&lt;b class=&quot;cursor&quot;&gt;&lt;/b&gt;&lt;/logo&gt;

Styleguide 1.1

*/
.logo
{
...
</code></pre>
<p><a href="https://github.com/varya/varya.github.com/blob/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/desktop.blocks/logo/logo.css">github/varya/varya.github.com/desktop-blocks/logo/logo.css</a></p>
<p>See it rendered: <a href="http://varya.me/styleguide/#/section/1.1">varya.me/styleguide/#/section/1.1</a></p>
<p>В некоторых компонентах использованы дополнительные возможности. Например, социальные иконки — это один и тот же блок
с разными модификаторыми. Такое можно задокументировать одним махом:</p>
<pre><code class="language-css">/*
Social icon

.social-ico__ico_type_rss         - RSS
.social-ico__ico_type_twitter     - Twitter
.social-ico__ico_type_github      - Github
.social-ico__ico_type_facebook    - Facebook
.social-ico__ico_type_linkedin    - LinkedIn

markup:
&lt;a class=&quot;link social-ico__ico {$modifiers}&quot; href=&quot;#&quot; title=&quot;Icon title&quot;&gt;&lt;/a&gt;

Styleguide 1.5.1
*/

.social-ico__ico
{
...
</code></pre>
<p><a href="https://github.com/varya/varya.github.com/blob/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/desktop.blocks/social-ico/social-ico.css#L49">github/varya/varya.github.com/desktop-blocks/social-ico/social-ico.css</a></p>
<p>В документации компоненты прорисованны по отдельности для каждого модификатора:
<a href="http://varya.me/styleguide/#/section/1.5.1">varya.me/styleguide/#/section/1.5.1</a></p>
<p>Для сложносоставных компоненты, которые используют внутри себя другие, я использовала ключевой тег <code>&lt;sg-insert&gt;</code>.
Он вставляет вместо себя код компонента с соответствующим номером.</p>
<pre><code class="language-css">/*
Sidebar
markup:
&lt;nav class=&quot;sidebar&quot;&gt;
  &lt;sg-insert&gt;4.2&lt;/sg-insert&gt;
  &lt;sg-insert&gt;4.3&lt;/sg-insert&gt;
&lt;/nav&gt;
Styleguide 4.1
*/

.sidebar
{
...
</code></pre>
<p><a href="https://github.com/varya/varya.github.com/blob/af38b1fb0bd6e5a1b043d002ad5dbf107f17e6c1/desktop.blocks/sidebar/sidebar.css">github/varya/varya.github.com/desktop-blocks/sidebar/sidebar.css</a></p>
<p>Благодаря этому документация в коде приемлемого размера, а на сайте все раскрывается в полном виде:
<a href="http://varya.me/styleguide/#/section/4.1">varya.me/styleguide/#/section/4.1</a></p>
<h2>Style-Guide-Driven Development</h2>
<p>Если в получившемся стайл гайде в поле для поиска вы наберете &quot;logo&quot;, то увидите все компоненты, который используют
логотип! Поиск проводится по всему коду. Точно так же можно поискать компоненты, в разметке которых используется <code>&lt;em&gt;</code>.
Или в чьих стилях есть <code>font:</code>.</p>
<p>Мне лично особенно нравится, что можно искать и по разметке. Этим можно пользоваться во время рефакторинга. Например,
изменив input, я могу найти все использующие его блоки и посмотреть, не сломались ли они.</p>
<p>Хотя на самом деле это лишь небольшое дополнение к главному преимуществу использования стайл гайда. По-моему, его
основной плюс — <strong>демонстрация ошибок вёрстки</strong>.</p>
<p>В CSS моего блога ещё до внедрения стайл гайда использовался компонентый подход. Учитывая мой БЭМ опыт, я была на 100%
уверена, что компоненты написаны хорошо. Но даже такая компонентная разработка всё равно происходила с точки зрения
страницы. До того как блоки были внедрены в блог, я делала их на отдельной статической странице. То есть отдельно, вне
страницы, они никогда и не существовали.</p>
<p>Блоки разрабатывались как независимые, я писала код, пытаясь этого достигнуть. Но <strong>будучи размещенными вместе на одной и
той же странице, они никогда независимыми не были</strong>.</p>
<p>После того как SC5 Style Guide волшебным образом отрисовал их по отдельности, я могу видеть, что блок
<a href="http://varya.me/styleguide/#/section/1.1">logo</a> выровнен по правому краю. Хотя почему бы это? Очевидно, это моя ошибка,
допущенная, когда я верстала логитип внутри блока Header.</p>
<p>То же самое произошло с <a href="http://varya.me/styleguide/#/section/1.4">переключалкой языков</a>, она так же выровнена вправо.</p>
<p>В <a href="http://varya.me/styleguide/#/section/1.5">блоке социальных иконок</a> переключалка языков подразумевалась рядом с
иконкой RSS. Но на странице они располагаются близко друг к другу только потому что весь блок помещен в узкий контейнер.
В стайл гайде блок отрисован отдельно, и мне теперь видно, что он свёрстан неидеально.</p>
<p>Конечно, такие открытия подразумевают скорый рефакторинг :-)</p>
<p>И в довершение нужно сказать, что эксперимент не закончен. Есть и другие открытия для новых постов.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/sc5-styleguide-for-smallers';
        window.disqus_identifier = 'posts-sc5-styleguide-for-smallers-index-ru';
        window.disqus_title = 'Стайл гайд для самых маленьких';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Стайл гайд для самых маленьких">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/sc5-styleguide-for-smallers/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/sc5-styleguide-for-smallers/</link><guid isPermaLink="true">http://varya.me/ru/posts/sc5-styleguide-for-smallers/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Tue, 18 Aug 2015 00:00:00 GMT</pubDate></item><item><title><![CDATA[Использование JSCS]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Использование JSCS</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Использование JSCS" property="og:title"/>
        <meta content="Использование JSCS" property="og:description"/>
        <meta content="http://varya.me/ru/posts/jscs-in-use/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/jscs-in-use/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Использование JSCS</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 11/25/2014</span><div><p>Хочу поделиться опытом поддержания единого стиля JavaScript в одном из своих проектов. Недавно мы решили пробовать
молодой инструмент JSCS, и результат его использования понравился всем членам команды.
<excerpt/></p>
<p>Когда я присоединилась к проекту <a href="http://styleguide.sc5.io/">SC5 Styleguide</a>, мне сразу бросилось в глаза отсутствие
единого стиля для JavaScript кода. Это ещё не было ужасающим, но было ясно, что проект в скором времени будет расти и чем раньше мы начнём
прилагать усилия к соблюдению единого стиля, тем лучше. Тем более, я уже знала о существовании и особенностях JSCS,
потому что на одном из моих проектов <a href="http://frontendbabel.info/articles/jscs-javascript-code-style/">публиковался перевод
статьи о нем</a>. Поэтому мы даже не стояли перед вопросом,
какой инструмент выбрать.</p>
<p>Конечно, есть и другие решения. Чаще всего называют JSLint и JSHint. Но давайте я сначала расскажу вам одну историю.</p>
<p>Оказывается, когда авторы JSHint познакомились с JSCS, он им так понравился, что они предпочли стать его
контрибьютерами, чем развивать проверку стиля в своём инструменте. А у себя оставили более сложные штуки, не про стиль,
а про программирование.</p>
<blockquote class="twitter-tweet" lang="ru"><p>And with that, JSCS now has all the style enforcement rules that are
being dropped in <a href="https://twitter.com/JSHint">@JSHint</a> 3.0: <a
href="https://t.co/W98EMSiTN5">https://t.co/W98EMSiTN5</a> cc <a
href="https://twitter.com/valueof">@valueof</a></p>&mdash; Mike Sherov (@mikesherov) <a
href="https://twitter.com/mikesherov/status/419596672520318976">4 января 2014</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Получается, выбор стоит не между JSLint, JSHint и JSCS, а между JSLint и комбинацией JSHint + JSCS.</p>
<pre><code class="language-js">gulp.task('jslint',
  [ 'jshint', 'jscs' ]
  );
</code></pre>
<p>А учитывая, что инструмент новый, со стройной архитектурой, контрибьютить в него будет одно удовольствие да и меньше
шансов на слишком долгую жизнь багов из-за какого-нибудь непроходимого легаси.</p>
<p>Вдохновляет также и тот факт, что JSCS уже выбрали такие уважаемые команды как разработчики jQuery, Bootsrap и
AngularJS.</p>
<p>Итак, JSCS — это npm-пакет, и установить его можно как глобально на свою машину так и локально на конкретный проект:</p>
<pre><code>npm install jscs
</code></pre>
<p>Кроме того, понадобится создать конфигурационный файл <code>.jscsrc</code> и там описать, какого стиля должен придерживаться
JavaScript на вашем проекте. Этот файл помещается в корень проекта.</p>
<p>Несмотря на большое количество правил, которые поддерживает JSCS, конфиг вряд ли будет большим, потому что в инструменте
предусмотрены пресеты. Популярных стилей для JavaScript кода не так много, и если вы выбрали один из них, то нет нужды
описывать стиль полностью. Достаточно указать, на кого вы хотели бы быть похожим:</p>
<ul>
<li>airbnb</li>
<li>crockford</li>
<li>google</li>
<li>jquery</li>
<li>mdcs</li>
<li>wikimedia</li>
<li>yandex</li>
</ul>
<p>Даже если у вас есть расхождения с этими стилями, всё равно удобно выбрать максимально похожий пресет, потому что в JSCS
возможно переопределить правила пресета.</p>
<p>И, конечно, важно, что инструмент уже достаточно зрелый. А значит, есть все необходимые дружественные пакеты и плагины
для разных редакторов.</p>
<h2>Как это было</h2>
<p>В общем, учитывая все эти факты, мы остановились на JSCS. Начали с того, что написали подходящую нам конфигурацию и тут
же исключили из списка для проверки все наши файлы. У проекта уже была модульная структура, поэтому это оказалось
несложным.</p>
<pre><code>{
    ...

    &quot;excludeFiles&quot;: [
      &quot;node_modules/**&quot;,
      &quot;src/modules/a/**&quot;,
      &quot;src/modules/b/**&quot;,
      &quot;src/*.js
    ]
}
</code></pre>
<p>Мы договорились, что начиная работать с каким-нибудь модулем, кроме реализации фич, мы также будем править стиль и
вычеркивать исправленные модули из списка непроверяемых файлов. Соблюдая это, мы довольно быстро исправили все файлы и
обошлись без конфликтов.</p>
<p>Гораздо важнее оказалось поддержание исправленных файлов в их исправленном состоянии во время будуших правок. Конечно,
тут нам помогают автоматические проверки. Но возникает вопрос, настолько строги мы должны быть в этих проверках и когда
именно проверять. Ведь поддержка стиля не должна становиться самоцелью и должна перетягивать на себя весь фокус
разработки.</p>
<p>В итоге мы пришли к концепции раздения ответственности. Так, для основного репозитория мы выбрали жесткую политику
в вопросе соблюдения стиля, а для форков — рекомендательную. Мы настроили Travis так, чтобы он проверял стиль для
пул-реквестов. Если стиль не соблюден, пул-реквест не может быть влит в основной репозиторий. Таким образом, там вообще
никогда нет кода с плохим стилем. В то же время для форков всё гораздо мягче. Мы отказались от насильственных pre-push
хуков с проверкой стиля, но рекомендуем самостоятельную установку pre-commit хука и использование плагинов JSCS для
редакторов, чтобы узнавать об ошибках в процессе разработки, а не тогда, когда ломается пул-реквест. Все рекомендации
написаны у нас в разработческой документации, и новые члены команды активно ими пользуются.</p>
<p>Всем особенно нравится, как реализована поддержка в редакторах. Ведь конфигурация стиля приезжает в репозиторий проекта
вместе с кодом, и редактор считывает её самостоятельно. А, главное, у разных проектов может быть разный стиль, и для
перекрестной работы не требуется никакая перенастройка.</p>
<p><img src="http://varya.me/jscs-talk/pictures/sublime.gif" alt=""></p>
<p>Ну и, конечно, всегда есть возможность запустить проверку стиля вручную как gulp-таск.</p>
<p><img src="http://varya.me/jscs-talk/pictures/travis.png" alt=""></p>
<h2>Предостережения</h2>
<p>Во время внедрения инструмента мы столкнулись с парочкой неудобств. Думаю, стоит о них упомянуть, тем более, что к ним
нашлись решения.</p>
<p>Основное расстройство — ошибка &quot;out of memory&quot; при запуске gulp-таска с проверкой. Оказалось, что недостаточно исключить
файлы в конфигурации JSCS. Gulp всё равно сначала пытается работать с ними всеми и пока дело доходит до JSCS, память уже
кончается. В итоге мы пришли к использованию пакета <code>gulp-ignore</code>:</p>
<pre><code>gulp.task('jscs', function() {
  return gulp.src([
    '**/*.js'
  ])
  .pipe(gulpIgnore.exclude([
    'node_modules/**',
    'demo-output/**'
  ]))
  .pipe(jscs());
})
</code></pre>
<p>Это не очень хорошее решение, ведь здесь пришлось перечислить все те исключения, которые уже задекларированы в <code>.jscsrc</code>.
Но лучшего варианта у нас пока нет.</p>
<p>И, второй момент: если вы используете watch в разработке, то скорее всего захотите видеть ошибки в терминале, но не
прерывать исполнение таска. Для этого потребуется <code>gulp-plumber</code>:</p>
<pre><code>gulp.task('jscs', function() {
  return gulp.src([
    '**/*.js'
  ])
  ...
  .pipe(plumber())
  .pipe(jscs());
});
</code></pre>
<p>Всё, больше никаких проблем или вопросов относительно иструмента у нас не было. Он прекрасно работает и уже сохранил нам
тысячи человекочасов.</p>
<h2>А также</h2>
<p>Возможно, вас также заинтересует <a href="http://habrahabr.ru/post/220229/">рассказ автора JSCS</a> и мои
<a href="http://varya.me/jscs-talk/">слайды</a> от доклада на эту тему.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/jscs-in-use';
        window.disqus_identifier = 'posts-jscs-in-use-index-ru';
        window.disqus_title = 'Использование JSCS';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Использование JSCS">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/jscs-in-use/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/jscs-in-use/</link><guid isPermaLink="true">http://varya.me/ru/posts/jscs-in-use/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Tue, 25 Nov 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Запускать вовремя (о приложениях на Mac)]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Запускать вовремя (о приложениях на Mac)</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Запускать вовремя (о приложениях на Mac)" property="og:title"/>
        <meta content="Запускать вовремя (о приложениях на Mac)" property="og:description"/>
        <meta content="http://varya.me/ru/posts/run-app-in-time-on-mac/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/run-app-in-time-on-mac/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Запускать вовремя (о приложениях на Mac)</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 9/10/2014</span><div><p>Я использую один и тот же ноутбук и для работы, и для личных дел. Это удобно, но за соблюдением баланса «работа-жизнь»
приходится следить дополнительно. Я поступаю просто: уходя с работы, закрываю все приложения. Главное не забывать их
открывать следующим утром. Но этот процесс можно автоматизировать :-)
<excerpt/>
Особенно важно держать открытыми приложения, от которых зависит работа других членов команды. Например, с началом
рабочего дня должен быть запущен джаббер (или другой используемый мессенджер).</p>
<p>В AppGyver для общения всех со всеми
используют <a href="https://www.flowdock.com">Flowdock</a>. Вот мне и понадобилось гарантированно иметь его открытым с утра.</p>
<p>Оказалось, что на Mac запуск приложения в определенное время можно сделать штатными средствами — при помощи приложения
Calendar. Вот как:</p>
<p>###Создайте в Календаре новое событие</p>
<p>Я назвала своё «Run Flowdock». Время события не обязательно устанавливать с учетом того, чтобы компьютер был уже открыт.
Можно и удобно запускать всё заранее. У моего события стоит <code>9:35</code>.</p>
<h3>Сделайте событие повторяющимся</h3>
<p>Событие должно повторяться каждую неделю по рабочим дням.</p>
<h3>Запускайте приложение</h3>
<p>А теперь самое интересное. Приложение можно запускать как кастомное уведомление о событии.<br/><br/>
В выпадушке <code>alert</code> нужно выбрать самый последний пункт — <code>Custom</code>.<br/>
<img
class="article__image"
src="http://img-fotki.yandex.ru/get/4802/14441195.32/0_88921_7d53950e_L.png" width="300" height="500" border="0"
title="" alt=""/></p>
<p>В появившемся диалоге вместо <code>Message</code> нужно выбрать <code>Open file</code></p>
<p><img
class="article__image"
src="http://img-fotki.yandex.ru/get/4813/14441195.32/0_88925_47986a79_M.png" width="300" height="167" border="0"
title="" alt=""/>
<img
class="article__image"
src="http://img-fotki.yandex.ru/get/5109/14441195.32/0_88924_ea39983e_M.png" width="300" height="162" border="0"
title="" alt=""/></p>
<p>Под файлом здесь понимается приложение. По умолчанию это <code>Calendar</code>, но можно выбрать и другое.</p>
<p><img
class="article__image"
src="http://img-fotki.yandex.ru/get/4810/14441195.32/0_88922_22d155c7_M.png" width="300" height="193" border="0"
title="" alt=""/></p>
<p>Затем в диалоговом окне Finder выбрать нужное приложение из папки <code>Applications</code>. В моём случае это Flowdock.</p>
<p><img
class="article__image"
src="http://img-fotki.yandex.ru/get/4809/14441195.32/0_88923_7597bf28_M.png" width="300" height="196" border="0"
title="" alt=""/></p>
<p>Затем корректируем время. За 5 минут до 9:35 — как раз будет полдесятого. Напоминаю, это вовсе не означает, что к этому
времени нужно сидеть на работе с открытым ноутбуком. Можно ехать в автобусе или вообще спать. Приложение запустится
тогда, когда вы откроете крышку.</p>
<h3>Минусы</h3>
<p>Не без минусов. Этот же календарь на iPhone в 9:30 пиликает уведомлением о событии. Файл на телефоне он открыть не
может, поэтому просто радостно сообщает, что вот оно событие наступает.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/run-app-in-time-on-mac';
        window.disqus_identifier = 'posts-run-app-in-time-on-mac-index-ru';
        window.disqus_title = 'Запускать вовремя (о приложениях на Mac)';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Запускать вовремя (о приложениях на Mac)">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/run-app-in-time-on-mac/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/run-app-in-time-on-mac/</link><guid isPermaLink="true">http://varya.me/ru/posts/run-app-in-time-on-mac/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Wed, 10 Sep 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Про дружбу народов во frontend сообществе]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Про дружбу народов во frontend сообществе</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Про дружбу народов во frontend сообществе" property="og:title"/>
        <meta content="Про дружбу народов во frontend сообществе" property="og:description"/>
        <meta content="http://varya.me/ru/posts/frontend-babel-alpha/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/frontend-babel-alpha/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Про дружбу народов во frontend сообществе</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 6/30/2014</span><div><p>Когда-то я читала о web-разработке только на русском. Позднее, выучившись на курсах английского, я стала всё больше и
больше читать англоязычные блоги и статьи. Также было и с конференциями: начав с русскоязычных, я затем стала посещать и
зарубежные. Иногда и со статьями, и с
докладами, я замечала, что контент очень разный. Бывало, складывалось впечатление, что каждое сообщество безусловно
развивается, но своим путём.
<excerpt/>
Думаю, многие русскоязычные разработчики знают статью Виталия Харисова «<a href="http://vitaly.harisov.name/article/independent-blocks.html">Вёрстка независимыми
блоками</a>».
Виталий опубликовал её в 2008 году, обозначив основные принципы вёрстки, известные сейчас под именем БЭМ. Можно считать,
что с того момента началось развитие БЭМ в России и соседних странах. А разработчики, владеющие английским языком,
узнали про БЭМ лишь в 2012 году из <a href="http://www.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/">моей статьи в
SmashingMagazine</a>.
Потом, как вы знаете, методология понравилась <a href="http://csswizardry.com/about/">Гари Робертсу</a> и благодаря его публикациям распространилась и на Западе.</p>
<p>Итак, прошло <strong>4 года</strong> между тем как технология была выпущена в свет и тем как о ней узнал обычный фронтендер из Алабамы.
За такой срок многие технологические вещи даже успевают устареть.</p>
<p>Нет никаких сомнений: и для технологии, и для индустрии было бы намного лучше, узнай массовый пользователь о БЭМ в
далеком 2008. Скорее всего развитие модульных технологий в Web началось бы раньше, и пошло бы быстрее. Уже сейчас мы бы
использовали WebComponents (реализующие идеи компонентного подхода БЭМ) повсеместно.</p>
<p>Некоторое время назад, размышляя над фактами, изложенными выше, я решила посвящать часть своего времени и страниц в блоге
переводам. Так появились посты-переводы про <a href="/en/issues/ym-modular-system">Ymaps modules</a> и
<a href="/en/issues/beml-html-preprocessor">BEML</a>. Сразу скажу, на очереди для перевода были и другие статьи. Читая личные блоги и
Хабр, я видела, что люди пишут уйму всего интересного. Но... разве только в России?</p>
<p>Представьте, сколько новых решений, библиотек, фреймворков есть на сегодняшний момент в других уголках света!
Только вы о них не узнаете, ведь их авторы говорят на арабском, испанском, японском и на многих других неизвестных вам
языках :-)</p>
<p>И всё-таки мы живём в удивительное время, и у нас, разработчиков интерфейсов, потрясающее сообщество. Open source
культура и такие технологии как GitHub позволяют нам помогать друг другу и добиваться намного больших результатов
вместе. При этом вовсе не обязательно коммитить в NodeJS, чтобы внести свой вклад. Так, например, работает известный многим
проект <a href="http://frontender.info/">Frontender.info</a> — благодаря коллективному труду у русскоязычных разработчиков есть постоянно обновляемый ресурс с
переводами самых актуальных статей с английского языка на русский.</p>
<p>Всё это подтолкнуло меня к созданию сервиса коллективных переводов на английский.</p>
<p>Проект называется **Frontend Babel ** и уже доступен по адресу <a href="http://frontendbabel.info">http://frontendbabel.info</a>.
Это статический блог (здесь я говорю спасибо DocPad за генерацию) — любой может развернуть его у себя, добавить
статью-перевод и пул-реквестом влить в сайт.</p>
<ul>
<li><a href="http://frontendbabel.info/about/">о проекте</a></li>
<li><a href="https://github.com/frontendbabel/frontendbabel.github.com">репозиторий</a></li>
<li><a href="http://frontendbabel.info/how-to-contribute">как контрибьютить</a></li>
</ul>
<p>Первые статьи уже перевёл с русского <a href="https://www.google.com/+MaxShirshin">Макс Ширшин</a>. Это</p>
<ul>
<li>интересная <a href="http://frontendbabel.info/articles/webpage-rendering-101">заметка Александра Скутина о рендеринге
страниц</a> (вы могли читать её на Хабре)</li>
<li>и прекрасная <a href="http://frontendbabel.info/articles/graphical-interface">статья Данила
Ковчего о графическом интерфейсе</a>.</li>
</ul>
<p>Можете уже сейчас поделиться этими
ссылками со своими англоязычными коллегами :-) Пусть узнают, какой у нас создаётся хороший контент.</p>
<p>Мы с Максом собираемся переводить всё новые и новые статьи. Также я приглашаю присоединиться к проекту арабо- японо-
испано- (тут даже бессмысленно перечислять каких ещё) язычных разработчиков. Надеюсь, они откликнутся, и мы наконец-то сможем узнать об
идеях и технических новинках наших коллег. Правда, вдохновить их на работу можно будет только собственным примером. Так
что, присоединяйтесь и вы.</p>
<p>Конечно, переводить на чужой язык намного сложнее, чем на родной. Но всё равно я хочу вас воодушевить. Все статьи
будут вычитываться (пока нами с Максом, а очень скоро — нейтивами), если вы ещё не пишете на английском, но хотели
начать, это отличная возможность потренироваться и научиться новому.<br/>
Статьи с хорошим контентом получают траффик. И упоминание автора и переводчика статьи (со ссылками на сайт и
социальные сети) — это заслуженные ими упоминание и новые профессиональные контакты.</p>
<p>Всегда помните: вклад в open source проект может быть небольшим, но в любом случае он неоценим! Вот лишь несколько идей,
каким может быть ваше участие:</p>
<ul>
<li><a href="https://github.com/frontendbabel/frontendbabel.github.com/issues/new">Добавьте статью в очередь на
перевод</a><br/>
Если вы знаете интересную статью (да хоть вашу собственную), которую стоит опубликовать, заведите issue об этом. Другой
участник проекта увидит эту задачу и переведёт.</li>
<li><a href="http://frontendbabel.info/how-to-contribute#push-new-translation">Сделайте свой перевод</a><br/>
Найдите интересную статью на русском, переведите её на английский и опубликуйте на сайте.</li>
<li><strong>Расскажите друзьям и коллегам о проекте</strong><br/>
Написав о Frontend Babel в Twitter, Facebook или своём блоге, вы поможете привлечь новых участников проекта. Особенно
круто вставить несколько мотивационных слов от себя :-)</li>
<li>Поправьте английский в статьях<br/>
Если вы видите грамматическую ошибку или опечатку, статью можно отредактировать (внизу, под текстом, есть ссылка) и
предложить свой pull request.</li>
<li>Предложите улучшения на сайте<br/>
Посоветуйте, что можно было бы улучшить, изложив свои идеи в
<a href="https://github.com/frontendbabel/frontendbabel.github.com/issues?labels=%40+Translation&amp;state=open">списке
задач</a>.</li>
<li><a href="https://github.com/frontendbabel/frontendbabel.github.com/issues?labels=&amp;page=1&amp;state=open">Возьмите на себя задачу</a><br/>
С вашим участием сайт может стать намного лучше!</li>
</ul>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/frontend-babel-alpha';
        window.disqus_identifier = 'posts-frontend-babel-alpha-index-ru';
        window.disqus_title = 'Про дружбу народов во frontend сообществе';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Про дружбу народов во frontend сообществе">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/frontend-babel-alpha/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/frontend-babel-alpha/</link><guid isPermaLink="true">http://varya.me/ru/posts/frontend-babel-alpha/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Mon, 30 Jun 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Первая неделя Frontend Babel]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Первая неделя Frontend Babel</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Первая неделя Frontend Babel" property="og:title"/>
        <meta content="Первая неделя Frontend Babel" property="og:description"/>
        <meta content="http://varya.me/ru/posts/frontend-babel-first-week/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Первая неделя Frontend Babel</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 6/2/2014</span><div><p>В прошлый понедельник запустился новый проект коллективных переводов фронтендерских статей на английский <a href="http://frontendbabel.info/">Frontend
Babel</a>. Я писала об этом <a href="/ru/posts/frontend-babel-alpha">подробный пост</a>, который очень
хорошо разошелся благодаря ретвитам и попаданию на Хабр. И насколько я могу судить по статистике, неделя прошла
отлично.
<excerpt/></p>
<p>Первый перевод проекта — статья «<a href="http://frontendbabel.info/articles/webpage-rendering-101/">What Every Frontend Developer Should Know About Webpage
Rendering</a>» попала в популярные рассылки <a href="http://css-weekly.com/">CSS
Weekly</a> и <a href="http://html5weekly.com/">HTML5 Weekly</a>. Благодаря им уже на следующий день сайт
посетило больше 9 тысяч человек! А всего за неделю было 35 тысяч просмотров.</p>
<p>А вот картинка про то, какую аудиторию получили публикации, которые могли рассчитывать только на русскоязычных читателей
всего две недели тому назад:</p>
<p><img src="http://img-fotki.yandex.ru/get/6745/14441195.32/0_85670_478637f6_orig.png" alt=""></p>
<p>Более того, спустя ещё день devrel Google Chrome Пол Льюис (<a href="https://twitter.com/aerotwist">@aerotwist</a>) опубликовал
в своём блоге пост с дополнительной информацией, о том как именно браузер рисует страницу — «<a href="http://aerotwist.com/blog/pixels-are-expensive/">Pixels are
expensive</a>». Упоминание Полом Frontend Babel стало ещё одним источником трафика — более
полутора тысяч посетителей. Но главное даже не это, а то что благодаря Frontend Babel <strong>состоялся диалог</strong>. Языковые
границы стираются, и развитие нашей индустрии ускоряется. Очень круто видеть такой результат уже в первую неделю работы!</p>
<p>Если вы уже вдохновлены стать причастными к этому успеху, <a href="https://github.com/frontendbabel/frontendbabel.github.com/issues?labels=%24+Russian&amp;page=1&amp;state=open">берите и
переводите</a> :-)
Кстати, не бойтесь сделать ошибку. Frontend Babel — это ресурс для англоязычной аудитории, и среди читателей обязательно
найдётся кто-то, кто исправит вас Pull-Request'ом. Это тоже <a href="https://github.com/frontendbabel/frontendbabel.github.com/pull/42">подтверждено
опытом</a>, даже <a href="https://github.com/frontendbabel/frontendbabel.github.com/pull/74">несколько
раз</a>.</p>
<p>Или можно <a href="https://github.com/frontendbabel/frontendbabel.github.com/issues/new">добавить статью в пул на перевод</a>. Там
уже есть сколько-то, но много не мало.</p>
<p>Ближайшее время (за вычетом переводов) я планирую посвятить расширению языковой географии Frontend Babel. Уже сейчас в
очереди есть статьи <a href="https://github.com/frontendbabel/frontendbabel.github.com/issues?labels=%24+French&amp;page=1&amp;state=open">на
французском</a> и
<a href="https://github.com/frontendbabel/frontendbabel.github.com/issues?labels=%24+Polish&amp;page=1&amp;state=open">польском</a>. Дело
за малым — надо найти переводчиков :-)</p>
<h2>Changelog</h2>
<p>Сам сайт Frontend Babel претерпел изменения и внешнего вида, и сборки. Здесь спасибо <a href="http://kizu.ru/">Роме Комарову</a>, он
насоздавал кучу issue, и их реализация делает сайт намного лучше с точки зрения UX.</p>
<p>Изменения же генерации сайта понадобились, чтобы у статей появились мета-описание и кратинка. Это делает их более
привлекательными, когда делишься ссылкой в Facebook или LinkedIn. Сниппет третьей статьи «<a href="http://frontendbabel.info/articles/developing-cross-browser-extensions/">Developing Cross-Browser
Extensions</a>» уже выглядел вот так:</p>
<p><img src="http://img-fotki.yandex.ru/get/6843/14441195.32/0_8566f_734ee93c_orig.png" alt=""></p>
<p>Хорошо бы ещё иметь такую картинку для корня проекта. Кто-нибудь может нарисовать? Ну и если у вас есть другие идеи по
улучшению, не стесняйтесь <a href="https://github.com/frontendbabel/frontendbabel.github.com/issues/new">завести issue</a>.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/frontend-babel-first-week';
        window.disqus_identifier = 'posts-frontend-babel-first-week-index-ru';
        window.disqus_title = 'Первая неделя Frontend Babel';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Первая неделя Frontend Babel">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/frontend-babel-first-week/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/frontend-babel-first-week/</link><guid isPermaLink="true">http://varya.me/ru/posts/frontend-babel-first-week/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Mon, 02 Jun 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Мобильное приложение на HTML5 со штатным интерфейсом]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Мобильное приложение на HTML5 со штатным интерфейсом</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Мобильное приложение на HTML5 со штатным интерфейсом" property="og:title"/>
        <meta content="Мобильное приложение на HTML5 со штатным интерфейсом" property="og:description"/>
        <meta content="http://varya.me/ru/posts/html5-mobile-app-width-native-ui/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/html5-mobile-app-width-native-ui/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Мобильное приложение на HTML5 со штатным интерфейсом</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 5/28/2014</span><div><p>Недавно я побывала на конференции <a href="http://2014.front-trends.com/">Front Trends 2014</a>
в Варшаве. Конференция очень крутая, обязательно посетите её в следующем году.
У них всегда интересная основная программа, и кроме неё есть ещё
мини-доклады от всех желающих. В этом году одним из таких докладов был мой,
о фреймворке и инструментах для разработки HTML5/JavaScript мобильных
приложений <a href="http://www.appgyver.com/steroids">Steroids</a>.
Если вы не были на конференции, то можете прочесть мою презентацию в тексте.
<excerpt/></p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#Cover">
  </iframe>
</div>
<p>Я совсем новичок в разработке мобильных приложений, но всё равно решилась
показать, как пользоваться Steroids, потому что благодаря ему я смогла сделать
приложение с системным интерфейсом (native UI) и безболезненно пройти через
весь цикл разработки за считанные минуты.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#summary">
  </iframe>
</div>
<p>Инструменты Steroids — это пакет с command line интерфейсом. Вместе с ним вы получите
JavaScript-фреймворк Steroids. А также инструменты обеспечат вам сборку проекта,
удобный процесс разработки, отладки и релиза. Всё написано под NodeJS, так что
потребуется его установить.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#3">
  </iframe>
</div>
<p>Нужна версия <code>0.10.25</code>. В инструкции <a href="http://academy.appgyver.com/categories/1/contents/1">Installation and Setup
Guide</a>
подробно написано, как устанавливать.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#4">
  </iframe>
</div>
<p>Самая первая команда, которой вы воспользуетесь, — это <code>steroids create</code>.
Затем, в получившейся папке проекта наберите <code>steroids connect --watch</code> —
запустится процесс steroids. Флаг <code>--watch</code> нужен, чтобы Steroids отслеживал
изменения файлов и каждый раз пересобирал проект и обновлял его на подключенных
устройствах.</p>
<p>Вы можете подключить к проекту реальный телефон. После запуска <code>steroids connect</code>
откроется окно браузера с QR-кодом. Считайте этот QR-код мобильным приложением
<code>AppGyver Scanner</code> — и проект окажется в вашем телефоне (а кроме того — будет
обновляться).</p>
<div style="text-align:center;">
<a href="https://itunes.apple.com/us/app/appgyver-scanner/id575076515?mt=8"
target="_blank"><img alt="Appstore" class="appstore_icon"
src="https://share.appgyver.com/assets/appstore-df950585b54bd081a7826913fc715cd4.png"></a>
<a href="https://play.google.com/store/apps/details?id=com.appgyver.android&amp;feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5hcHBneXZlci5hbmRyb2lkIl0."
target="_blank"><img alt="Googleplay" class="appstore_icon"
src="https://share.appgyver.com/assets/googleplay-2cef882d62e402fbdbfe8cdac5794069.png"></a>
</div>
<p>Другой способ — открыть проект в Simulator. Для этого наберите <code>simulator</code>
в окне терминала, где запускали <code>steroids connect</code>.</p>
<p>Теперь можете изменить исходный код приложения. Например, напишите
свой текст в файле <code>www/index.html</code>. После этого можете проверить,
что приложение в подключенном телефоне или в симуляторе изменилось.</p>
<p>Научиться, как сделать более серьезные изменения в проекте, вы
можете из примеров и туториалов. Запустите <code>steroids generate</code>, и
получите нужный код.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#5">
  </iframe>
</div>
<p>Можете смотреть, как устроены эти примеры, учиться по
<a href="http://academy.appgyver.com/">туториалам</a> и
<a href="http://docs.appgyver.com/en/stable/index.html">API документации</a>.
Дальше я покажу как использовать в вашем приложении
некоторые штатные элементы интерфейса, то есть
писать на HTML5/JavaScript приложение с <em>native UI</em>.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#examples-list">
  </iframe>
</div>
<p>Давайте начнем с табов.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#7">
  </iframe>
</div>
<p>Вы можете найти закомментированный пример использования
табов в файле <code>config/application.coffee</code>. Это список табов
с их иконками и ссылками, на которые они ведут.</p>
<p>В моём приложении я создаю 3 таба для следующих страниц:</p>
<ul>
<li>index.html</li>
<li>notificationExample.html</li>
<li>knowledge.html</li>
</ul>
<pre><code class="language-coffee">steroids.config.tabBar.enabled = true
steroids.config.tabBar.tabs = [
  {
    title: &quot;Index&quot;
    icon: &quot;icons/pill@2x.png&quot;
    location: &quot;http://localhost/index.html&quot;
  },
  {
    title: &quot;Notifications&quot;
    icon: &quot;icons/bell.png&quot;
    location: &quot;http://localhost/notificationExample.html&quot;
  },
  {
    title: &quot;Knowledge base&quot;
    icon: &quot;icons/coding.png&quot;
    location: &quot;http://localhost/knowledge.html&quot;
  }
]
</code></pre>
<p>Положите html-файлы этих страниц в папку <code>www</code>. Пока они могут
быть пустыми. Также не забудьте об иконках, можете взять из моего
репозитория всю папку <a href="https://github.com/varya/steroids-fronttrends2014/tree/master/www/icons">icon
folder</a>.</p>
<p>После того как все изменения будут сделаны, подождите пересборки и
убедитесь в результате.</p>
<div style="text-align:center;">
<img src="http://img-fotki.yandex.ru/get/9088/14441195.32/0_84262_ae854cb8_orig.png" width="340" height="89" border="0" title="" alt=""/>
</div>
<p>Дальше можно поиграть с нотификациями.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#8">
  </iframe>
</div>
<p>Разместите код этих кнопок внутри тега <code>&lt;body&gt;</code> на странице
<code>www/notificationExample.html</code>.</p>
<pre><code class="language-html">&lt;button
  class=&quot;button button-block&quot;
  ontouchend=&quot;showAlert()&quot;&gt;Show alert dialogue&lt;/button&gt;
&lt;button
  class=&quot;button button-block&quot;
  ontouchend=&quot;showConfirm()&quot;&gt;Show confirm dialogue&lt;/button&gt;
&lt;button
  class=&quot;button button-block&quot;
  ontouchend=&quot;showPrompt()&quot;&gt;Show prompt dialogue&lt;/button&gt;
&lt;button
  class=&quot;button button-block&quot;
  ontouchend=&quot;vibrate()&quot;&gt;Vibrate the device&lt;/button&gt;
</code></pre>
<p>Кнопки реагируют на прикосновения пользователя и запускают
различные JavaScript-функции. Чтобы сделать страницу работающей,
нужно задать эти функции в <code>&lt;head&gt;</code> или <code>*.js</code> файле страницы.
Каждая из них иллюстрирует работу своего вида нотификации, такого
как:
a kind of notification which are:</p>
<ul>
<li><code>navigator.notification.alert</code></li>
<li><code>navigator.notification.confirm</code></li>
<li><code>navigator.notification.prompt</code></li>
<li><code>navigator.notification.vibrate</code></li>
</ul>
<p>Код функций можете взять
<a href="https://github.com/varya/steroids-fronttrends2014/blob/master/www/notificationExample.html#L15">из моего репозитория</a>.</p>
<p>Теперь вы можете перейти на эту страницу по соответствующему
табу и увидеть, как работает каждый тип нотификации.</p>
<p>Следующий системный элемент — кнопка на навигационной панели
(navigation bar).</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#9">
  </iframe>
</div>
<p>Навигационная панель может быть изменена при помощи JavaScript-хелперов
фреймворка Steroids. Если вы хотите сделать её одинаковой для всех страниц
приложения, то разместите код в файле <code>www/javascripts/application.js</code>,
который подключен ко всем <code>*.html</code> файлам.</p>
<pre><code class="language-js">var loginButton = new steroids.buttons.NavigationBarButton();
loginButton.title = &quot;the Button&quot;;

loginButton.onTap = function() {
    navigator.notification.alert(
        'You tapped the button!',
        function(){},
        'the Alert',
        'I did!'
    );
}

steroids.view.navigationBar.update({
    buttons: {
      right: [loginButton]
    }
})
</code></pre>
<p>Этот код вставит кнопку в правую часть навигационной панели.
Касание кнопки запустит нотификацию, уже знакомую вам по предыдущему
примеру.</p>
<div style="text-align:center;">
<img src="http://img-fotki.yandex.ru/get/9115/14441195.32/0_84264_7f27d435_L.png" width="282" height="500" border="0" title="" alt=""/>
</div>
<p>И последний пример штатного интерфейса в этом приложении
— модальное окно.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#10">
  </iframe>
</div>
<p>Разместите эту кнопку в файле <code>www/index.html</code>:</p>
<pre><code class="language-html">&lt;a
  class=&quot;button button-block&quot;
  ontouchend=&quot;showModal()&quot;&gt;Open modal&lt;/a&gt;
</code></pre>
<p>И определите функцию <code>showModal</code>, которая открывает модальное
окно с соответствующим содержанием.</p>
<pre><code class="language-js">function showModal() {
  var webView =
    new steroids.views.WebView(&quot;/views/modalExample/show.html&quot;);
  steroids.modal.show(webView);
}
</code></pre>
<p>Что показывать в модальном окне, должно быть написано в файле
<code>app/views/modalExample/show.html</code>. Кстати, не забудьте, что там
должна быть кнопка закрывания модального окна. Чтобы всё прошло
быстрее, позаимствуйте
<a href="https://github.com/varya/steroids-fronttrends2014/blob/master/app/views/modalExample/show.html">код из репозитория приложения</a>.</p>
<p>С этими и <a href="http://docs.appgyver.com/en/stable/steroids_Steroids%20Native%20UI_index.md.html#Steroids%C2%A0Native%C2%A0UI">другими элементами интерфейса</a>
вы можете сделать приложение с системным интерфейсом, которое
будет выглядеть натурально на том устройстве, на котором запускается
приложение.</p>
<p>Когда приложение закончено (или даже в процессе), вы можете захотеть
показать его другу, клиенту или даже маме.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#sharing">
  </iframe>
</div>
<p>Можно воспользоваться QR-кодом, упоминаемым в начале статьи. Он
принесет код с вашего компьютера на любое устройство. Но вы оба должны
быть подключены к одной сети.</p>
<p>Если вы хотите показать приложение удаленно, разместите код в облаке.
Для этого есть команда <code>steroids deploy</code>. В результате вы тоже получите
страницу с QR-кодом. Его можно считать при помощи <code>AppGyver Scaner</code> и
получить в своём телефоне приложение прямо из облака.</p>
<p>Вы можете делиться всеми своими приложениями из облака. А также
настраивать их и собирать релизы. Всё это делается через web-интерфейс
<a href="https://cloud.appgyver.com/applications">cloud.appgyver.com</a>.</p>
<p>Отсюда же приложения можно отправлять в AppStore и GooglePlay.</p>
<div style="text-align:center;">
<img src="http://img-fotki.yandex.ru/get/9062/14441195.32/0_84265_d03d686e_orig.png" width="500" height="327" border="0" title="" alt=""/>
</div>
<p>Видите, это просто. Настолько просто, что даже новичок может не только
разработать приложение, но и сделать об этом презентацию с живым кодом
на конференции.</p>
<div class="slide">
  <iframe class="slide__frame"
    src="http://varya.me/start-with-steroids/?full#links">
  </iframe>
</div>
<p>Узнать больше о Steroids и Cordova (в основе Steroids лежит PhoneGap)
можно в <a href="http://academy.appgyver.com/">AppGyver Academy</a>. Там есть:</p>
<ul>
<li>подробные обучающие материалы,</li>
<li>документация,</li>
<li>сообщество разработчиков.</li>
</ul>
<p>И, конечно, вы можете читать <a href="/ru/posts">этот блог</a>. Я собираюсь
делиться своими следующими открытиями относительно Steroids в ближайшее время :-)</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
    (function(){
        window.disqus_shortname = 'varya';
        window.disqus_developer = '1';
        window.disqus_url = 'http://varya.me//ru/posts/html5-mobile-app-width-native-ui';
        window.disqus_identifier = 'posts-html5-mobile-app-width-native-ui-index-ru';
        window.disqus_title = 'Мобильное приложение на HTML5 со штатным интерфейсом';
        if ( window.DISQUS ) {
            return DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.identifier = window.disqus_identifier;
                    this.page.url = window.disqus_url;
                    this.page.title = window.disqus_title;
                }
            });
        }
        else {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }
    })();
</script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Мобильное приложение на HTML5 со штатным интерфейсом">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/html5-mobile-app-width-native-ui/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/html5-mobile-app-width-native-ui/</link><guid isPermaLink="true">http://varya.me/ru/posts/html5-mobile-app-width-native-ui/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Wed, 28 May 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Мобильное приложение на Steroids]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Мобильное приложение на Steroids</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Мобильное приложение на Steroids" property="og:title"/>
        <meta content="Мобильное приложение на Steroids" property="og:description"/>
        <meta content="http://varya.me/ru/posts/first-steroids-app/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Мобильное приложение на Steroids</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 4/2/2014</span><div><p>На днях я написала своё первое мобильное приложение. Суммарно это заняло всего
пару часов, и всё благодаря фреймворку
<a href="http://www.appgyver.com/steroids">Steroids</a> от AppGyver. С его помощью делать
гибридные приложения (это когда HTML5/JavaScript внутри) очень легко, а
инструменты <code>Steroids</code> позволяют легко деплоить приложение и делиться им с
друзьями.<excerpt/></p>
<h3>Легко посмотреть приложение</h3>
<p>Приложение у меня пока &quot;игрушечное&quot; — это всего одна страница, где озвучены
случайные числительные на финском языке.</p>
<div style="text-align:center;">
<img
src="http://img-fotki.yandex.ru/get/9827/14441195.30/0_81ae7_60ff43b1_L.png"
width="282" height="500" title="" alt="" border="0"/>
</div>
<p>Сейчас увидеть работающее приложение в телефоне можно только через <code>Appgyver Scaner</code> — вспомогательную программу для обмена Steroids-based мобильными
приложениями до релиза. Поставьте сейчас, чтобы позже загрузить моё приложение:</p>
<div style="text-align:center;">
<a href="https://itunes.apple.com/us/app/appgyver-scanner/id575076515?mt=8"
target="_blank"><img alt="Appstore" class="appstore_icon"
src="https://share.appgyver.com/assets/appstore-df950585b54bd081a7826913fc715cd4.png"></a>
<a href="https://play.google.com/store/apps/details?id=com.appgyver.android&amp;feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5hcHBneXZlci5hbmRyb2lkIl0."
target="_blank"><img alt="Googleplay" class="appstore_icon"
src="https://share.appgyver.com/assets/googleplay-2cef882d62e402fbdbfe8cdac5794069.png"></a>
</div>
<p>Теперь вы можете открыть в компьютере эту
<a href="http://bit.ly/finnish-counting-001">страницу с QR-кодом</a>. Отсканируйте QR-код
при помощи
свежеустановленного AppGyver Scaner, и моё приложение загрузится к вам в
телефон.</p>
<p>Я сознательно не релизила пока приложение. Во-первых, оно ещё сырое. А
во-вторых, хочу, чтобы вы увидели как легко поделиться готовящимся
приложением с другими, причем на любом этапе разработки.</p>
<h3>Запустить dev-версию</h3>
<p>Код приложения открытый, хостится на Github:
<a href="https://github.com/varya/finnish-counting">varya/finnish-counting</a>. Чтобы
развернуть проект у себя на машине, понадобится npm-пакет <code>steroids</code>:</p>
<pre><code>npm install steroids -g
</code></pre>
<p>Если до этого npm-пакеты на машину не устанавливались, то придется пройти через
все шаги <a href="http://academy.appgyver.com/categories/1/contents/1">инструкции по
установке</a>.</p>
<p>Затем нужно склонировать код проекта и установить зависимости:</p>
<pre><code>git clone git@github.com:varya/finnish-counting.git -b develop
cd finnish-counting
npm install
</code></pre>
<p>Для начала работы с проектом запускаем</p>
<pre><code>steroids connect --watch
</code></pre>
<p>Ключ <code>--watch</code> нужен для отслеживания изменений и перезагрузки приложения.</p>
<p>После запуска этой команды в браузере откроется страница с QR-кодом.
Отсканировав QR-код всё тем же AppGyver Scaner, вы получите приложение прямо в
телефоне. Только имейте в виду, что телефон и компьютер должны находиться в
одной сети. При каждой редакции кода приложение будет обновляться – очень
удобно, особенно если работаешь над внешним видом интерфейса.</p>
<p>Если телефона под рукой нет, можно открыть приложение на макет в iOS simulator.
Для этого в терминале с запущенным <code>steroids</code> нужно просто написать</p>
<pre><code>simulator
</code></pre>
<h3>Что писать?</h3>
<p>Основной код приложения находится в
<a href="https://github.com/varya/finnish-counting/blob/vesions/0.0.1/www/javascripts/application.js">www/application.js</a>.
Оно ещё маленькое и не использует все возможности Steroids. Но уже очевидно, что
когда страниц станет больше, мне понадобится <a href="http://docs.appgyver.com/en/edge/steroids_Steroids%20Native%20UI_index.md.html#Steroids%C2%A0Native%C2%A0UI">Steroids Native
UI</a>.</p>
<p>Другие возможности фреймворка такие как удобное обращение к камере, файловой
системе телефона, нотификациям — хорошо задокументированы на страницах <a href="http://docs.appgyver.com/en/edge/index.html">API
Docs</a>. Там же есть примеры
использования <code>Cordova API</code> — именно с его помощью в моём приложении
проигрывается звук.</p>
<p>Новые приложения появляются каждый день, можно релизить и хвастаться в <a href="http://x.appgyver.com/xapps">AppGyver
Apps Gallery</a>. Только успевай с идеями: я вот
хотела написать мобильный аналог игры 2048, а он уже там есть. Значит, буду
развивать свою «считалку» :-)</p>
<p>Кстати, у кого есть телефон на Андроиде — проверьте, скачивается у вас моё
приложение, работает ли? Я пока могу проверить только на iOS, а одно из
преимуществ приложений на Steroids — то, что они кросс-платформенные, с
нативными фичами для каждой платформы, конечно.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Мобильное приложение на Steroids">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/first-steroids-app/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/first-steroids-app/</link><guid isPermaLink="true">http://varya.me/ru/posts/first-steroids-app/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Wed, 02 Apr 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Локальная разработка и удаленный хостинг статики]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Локальная разработка и удаленный хостинг статики</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Локальная разработка и удаленный хостинг статики" property="og:title"/>
        <meta content="Локальная разработка и удаленный хостинг статики" property="og:description"/>
        <meta content="http://varya.me/ru/posts/borschik-static-assets/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/borschik-static-assets/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Локальная разработка и удаленный хостинг статики</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 3/12/2014</span><div><p>На прошлой неделе мне понадобилось сделать сайт, статика которого раздаётся с
другого сервера. Это касалось всех статических файлов: как подключенных к HTML
документу CSS и JavaScript, так и изображений и шрифтов, использованных уже в
их коде.<excerpt/> Хотя очевидно, что все они эти ресурсы должны быть локальными во
время разработки. То есть задача была придумать магию, которая знает, где будет
размещена статика, и преобразовывает относительные пути в коде в абсолютные
согласно этому знанию.</p>
<p>Эту задачу я решила при помощи инструмента
<a href="http://bem.info/tools/optimizers/borschik/">Borschik</a>. Борщик-сборщик, всем
должно быть понятно. :-)</p>
<center>
<iframe src="//embed.gettyimages.com/embed/135591409?et=B_T3l-shrE-pr9-ELe_wJw&sig=5haG67PAzCxGourA96ZB7m9LwSket1v9PpvXEXNIkBM=" width="508" height="407" frameborder="0" scrolling="no"></iframe>
</center>
<p>Демо-проект с этим решением находится в репозитории
<a href="https://github.com/varya/st-deliverer">varya/st-deliverer</a></p>
<h3>Структура проекта</h3>
<p>Как вы позже увидите, <code>borschik</code> можно гибко настроить. Так что возможна любая
структура проекта. В моём проекте все хранится в директории
<a href="b.com/varya/st-deliverer/tree/master/src">src</a>.
После сборки получается HTML-файлы в папке
<a href="https://github.com/varya/st-deliverer/tree/gh-pages/dist/html">dist/html</a>.
Проверьте его код, и вы убедитесь, что статические файлы подключены с другого
хоста по абсолютному пути.</p>
<pre><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Deliver static assets with Borschik&lt;/title&gt;
    &lt;link
      rel=&quot;stylesheet&quot;
      href=&quot;http://varya.github.io/stor.../styles.css&quot;/&gt;
  &lt;/head&gt;
  &lt;body
    class=&quot;page&quot;
    background=&quot;http://varya.github.io/stor.../grungy.jpg&quot;&gt;
  ...
</code></pre>
<p>Страничку можно <a href="http://varya.me/st-deliverer/dist/html/">открыть в браузере</a> и
насладиться моим дизайном и прекрасным котиком.</p>
<h3>Borschik в вашем проекте</h3>
<p>Borschik — это npm-пакет. Его можно установить глобально при помощи команды</p>
<pre><code class="language-bash">npm install -g borschik
</code></pre>
<p>Но лично я предпочитаю локальные зависимости, так что завожу в корне проекта
файл
<a href="https://github.com/varya/st-deliverer/blob/master/package.json">package.json</a>:</p>
<pre><code class="language-js">{
  ...
  &quot;dependencies&quot;: {
    &quot;borschik&quot;: &quot;0.4.2&quot;
  },
  ...
}
</code></pre>
<h3>Настройка</h3>
<p>Прежде чем начинать преобразования, нужно проинструктировать <code>borschik</code>, что
преобразовывать и как. Для этого нужен конфигурационный файл
<a href="https://github.com/varya/st-deliverer/blob/master/.borschik">.borschik</a>:</p>
<pre><code class="language-js">{
  &quot;paths&quot; : {
    &quot;src/img/&quot;: &quot;http://varya.github.io/stor.../st-deliverer/img/&quot;,
    &quot;src/css/&quot;: &quot;http://varya.github.io/stor.../st-deliverer/css/&quot;,
    &quot;src/font/&quot;: &quot;http://varya.github.io/storage/fonts/&quot;

  }
}
</code></pre>
<p>Заметьте, для разных путей можно настроить разную замену. Здесь это видно на
примере с фонами.</p>
<h3>Запускаем!</h3>
<p>Запустите <code>borschik</code> над файлом, содержащим ссылки на локальные статические
ресурсы, и вы получите результат преобразования. Например,</p>
<pre><code class="language-bash">./node_modules/borschik/bin/borschik \
  --input=src/css/styles.css
</code></pre>
<p>Чтобы использовать это в сборке, понадобится ещё один флаг <code>--output</code>,
сообщающий куда записать получившееся.</p>
<p><code>borschik</code> знаком с синтаксисом web-технологий. То есть &quot;ссылки&quot; размещенные в
простом тексте останутся нетронутыми.</p>
<h3>Система сборки</h3>
<p>Теперь <code>borschik</code> можно включить в систему сборки проекта. В моём случае это
небольшой
<a href="https://github.com/varya/st-deliverer/blob/master/Makefile">Makefile</a>, спасибо
<a href="https://github.com/alexeyten">@alexeyten</a> за 90% его содержания. :-) Но есть
также и плагин для grunt <a href="https://github.com/megatolya/grunt-borschik">megatolya/grunt-borschik</a>.<br/>
Конечно, <code>borschik</code> включен в системы сборки БЭМ-проектов
<a href="http://bem.info/tools/bem/bem-tools/">bem-tools</a>
и <a href="https://github.com/enb-make/enb">enb</a></p>
<h3>Результат</h3>
<p>Для закрепления <a href="http://varya.me/st-deliverer/dist/html/">проведайте котика ещё раз</a>.</p>
<p>А узнать о многих других возможностях <code>borschik</code> можно из статьи
<a href="http://ru.bem.info/articles/borschik/">http://ru.bem.info/articles/borschik/</a>.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Локальная разработка и удаленный хостинг статики">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/borschik-static-assets/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/borschik-static-assets/</link><guid isPermaLink="true">http://varya.me/ru/posts/borschik-static-assets/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Wed, 12 Mar 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[JavaScript в BEMJSON]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>JavaScript в BEMJSON</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="JavaScript в BEMJSON" property="og:title"/>
        <meta content="JavaScript в BEMJSON" property="og:description"/>
        <meta content="http://varya.me/ru/posts/javascript-in-bemjson/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/javascript-in-bemjson/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">JavaScript в BEMJSON</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 1/21/2014</span><div><p>Обычно разработка страницы начинается с прототипирования интерфейса и затем
продолжается созданием статической странички при помощи HTML/CSS и элементарного
JavaScript. Если использууется полный стек БЭМ, переход от прототипирования к
полноценному сайту происходит постепенно. Можно склонировать проект
<a href="https://github.com/bem/project-stub">project-stub</a>
и сделать статическую страницу, об этом уже опубликован
<a href="http://bem.info/articles/start-with-project-stub/">туториал</a>.<excerpt/></p>
<p>Благодаря <code>BEMHTML</code> вам не нужно писать весь HTML для страницы вручную. Описывая
страницу в BEMJSON, вы экономите время, ведь не нужно писать каждый тег. Но в
случае больших страниц этого мало.</p>
<p>К счастью, в BEMJSON можно включать JavaScript, результатом которого будет
описание блоков.
Вот пример такой страницы:</p>
<pre><code class="language-js">({
    block: 'page',
    ...
    content:[
        ...
        {
            block: 'content',
            content: (function() {
                var res = [];
                for(var i = 0; i &lt; 10; i++) {
                    res.push({
                        block: 'button',
                        content: 'Button ' + (i + 1)
                    });
                }
                return res;
            })()
        },
        ...
    ]
})
</code></pre>
<p><a href="https://github.com/varya/dynamic-bemjson/blob/master/desktop.bundles/page1/page1.bemjson.js">полный
код</a></p>
<p>Когда страница собирается при помощи <code>bem-tools</code>, этот JavaScript создает 10
блоков <code>button</code>.
Можете проверить <a href="http://varya.me/dynamic-bemjson/desktop.bundles/page1/page1.html">результирующую страницу</a>
чтобы увидеть их.</p>
<p>Ещё одним примером может служить блок <code>menu</code>. Такой интерфейсный компонент
обычно состоит из множества повторяющихся пунктов с минимальными различиями.
Получается копипаст, которого можно избежать, используя JavaScript в BEMJSON.</p>
<pre><code class="language-js">({
    block: 'page',
    ...
    content:[
        ...
        {
            block: 'menu',
            content: [
                {
                    title: 'Index',
                    isSelected: false,
                },
                {
                    title: 'Products',
                    isSelected: true
                },
                {
                    title: 'Contact',
                    isSelected: false
                }
            ].map(function(item){
                var block = {
                    block: 'menu',
                    elem: 'item',
                    content: item.title,
                    mods: {
                        selected: item.isSelected
                    }
                };
                return block;
            })
        },
        ...
    ]
})
</code></pre>
<p><a href="https://github.com/varya/dynamic-bemjson/blob/master/desktop.bundles/page2/page2.bemjson.js">full
code</a></p>
<p>В результате получается <a href="http://varya.me/dynamic-bemjson/desktop.bundles/page2/page2.html">страница с меню из 3х пунктов</a>.
Чем больше массив с пунктами меню, тем больше пользы. Особенно если структура
меню меняется в процессе разработки.</p>
<p>Конечно, этой возможностью не придется пользоваться, если BEMJSON — это
результат первого слоя шаблонов (таких как BEMTREE или priv.js) — там вы можете
произвести столько BEMJSON, сколько требуется. Но на первом этапе разработки,
когда делается статическая страница, трюки с JavaScript в BEMJSON помогут
избежат копипаста.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for JavaScript в BEMJSON">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/javascript-in-bemjson/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/javascript-in-bemjson/</link><guid isPermaLink="true">http://varya.me/ru/posts/javascript-in-bemjson/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Tue, 21 Jan 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Блоки как кирпичи и бандлы как дома]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Блоки как кирпичи и бандлы как дома</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Блоки как кирпичи и бандлы как дома" property="og:title"/>
        <meta content="Блоки как кирпичи и бандлы как дома" property="og:description"/>
        <meta content="http://varya.me/ru/posts/blocks-and-bundles/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/en/posts/blocks-and-bundles/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Блоки как кирпичи и бандлы как дома</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 1/15/2014</span><div><p>Некотрое время назад мой знакомый, который делает проект на полном стеке БЭМ
(BEM-CSS, i-bem.js и BEMHTML-шаблоны),
задал мне несколько вопросов об использовании
<a href="https://github.com/bem/project-stub/tree/14e24fd17ba66a357a2f6fcdce045065b4eb5d6c">BEM project
stub</a>.
Отвечая на вопрос, я пообещала опубликовать ответ в виде текста, потому что
многие вещи вокруг БЭМ не проговариваются, считаясь слишком простыми — и
ошибочно!<excerpt/></p>
<p>Вопрос был о конфигурационном файле <code>.bem/make.js</code>, который нужен при
использовании
<a href="http://bem.info/tools/bem/bem-tools/">bem tools</a>
для сборки страниц.
<a href="https://github.com/bem/project-stub/blob/14e24fd17ba66a357a2f6fcdce045065b4eb5d6c/.bem/make.js#L12">Строчки 12 и
13</a>
описывают регулярные выражения для <code>blocks</code> и <code>bundles</code>. Не сразу понятно,
что это значит.</p>
<p>Вообще эти выражения нужны, чтобы распознать папки на файловой системе. Те,
которые заканчиваются на <code>.blocks</code> — для блоков, а те, что заканчиваются на
<code>.bundles</code> — для бандлов (страниц). Под эти выражения, например, подходят папки
<code>desktop.blocks</code> и <code>desktop.bundles</code> из project-stub.</p>
<p>Для чего нужна папка <code>desktop.blocks</code>, должно быть понятно. Поскольку БЭМ —
модульный паттерн, необходимо место для хранения модулей, то есть блоков. Каждый
блок — это директория, содержащая все файлы, нужные для каждого конкретного
интерфейсного модуля.</p>
<p>Вот, например, <a href="https://github.com/varya/online-shop-dummy/tree/master/desktop.blocks">набор блоков одного
проекта</a>.</p>
<p>Папка <code>desktop.bundles</code> нуждается в пояснении. Она содержит страницы – результат
использования блоков. Каждая страница помещена в отдельную директорию, внутри
которой располагаются все файлы, нужные для страницы.
Можно снова посмотреть
<a href="https://github.com/varya/online-shop-dummy/tree/gh-pages/desktop.bundles">пример из предыдущего
проекта</a>.</p>
<p>Разница в том, что файлы блоков созданы разработчиком, а файлы бандлов созданы
bem tools. Для блоков это знакомые нам CSS, JavaScript и иногда шаблоны.</p>
<pre><code>├── desktop.blocks/
│   ├── goods/
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/master/desktop.blocks/goods/goods.bemhtml">goods.bemhtml</a>
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/master/desktop.blocks/goods/goods.css">goods.css</a>
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/master/desktop.blocks/goods/goods.deps.js">goods.deps.js</a>
│   │   └── <a href="https://github.com/varya/online-shop-dummy/blob/master/desktop.blocks/goods/goods.ie.css">goods.ie.css</a></code></pre>
<p>Проводя параллели для БЭМ (и любого другого модульного паттерна) в реальном
мире, можно сказать, что блок — это кирпичик.</p>
<p><img src="http://img-fotki.yandex.ru/get/6730/14441195.30/0_7e0f8_33c1c86c_L.jpg" alt=""></p>
<p>Файлы бандлов — это тоже файлы, нужные для браузера: CSS, JavaScript, HTML. <em>Ни
один из них не написан разработчиком, они созданы bem tools</em>. Можете посмотреть
внутрь файлов и убедиться, что код абсолютно &quot;роботный&quot;.</p>
<pre><code>├── desktop.bundles/
│   ├── index/
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/gh-pages/desktop.bundles/index/_index.css">_index.css</a>
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/gh-pages/desktop.bundles/index/_index.js">_index.js</a>
│   │   ├── <a href="https://github.com/varya/online-shop-dummy/blob/gh-pages/desktop.bundles/index/index.bemjson.js">index.bemjson.js</a>
│   │   └── <a href="https://github.com/varya/online-shop-dummy/blob/gh-pages/desktop.bundles/index/index.html">index.html</a></code></pre>
<p>Для понимания bem tools представьте, что это строительный кран. Он берет
строительные блоки и возводит из них дом.</p>
<p><img src="http://img-fotki.yandex.ru/get/9058/14441195.30/0_7e0f3_ff76f66a_L.jpg" alt=""></p>
<p>Хотя, кроме *.js, *.css и *.html файлов, всё-таки есть один файл, написанный
разрабочиком.
Это
<a href="https://github.com/varya/online-shop-dummy/blob/gh-pages/desktop.bundles/index/index.bemjson.js">index.bemjson.js</a>
— JSON описание того, что за блоки нужны на странице и какова их древовидная
структура. Звучит логично, ведь только человек знает, что нужно показать на
странице. Всё остальное делают bem tools. Получив информацию о том, какие блоки
нужны для страницы, они берут их код из <code>desktop.blocks</code> и формируют с их
помощью страницу.</p>
<p>Продолжая пример со строительством дома, можно сказать что <code>page.bemjson.js</code> —
это чертеж.</p>
<p><img src="http://img-fotki.yandex.ru/get/6704/14441195.30/0_7e1ba_9dacd537_L.jpg" alt=""></p>
<p>Но почему же <code>bem tools</code> нужно регулярное выражение в настройках?</p>
<p>Это несложно. Все папки, которыми оперирует <code>bem tools</code> — это <code>уровни переопределения</code>. Должно быть легче, если представлять уровень как набор
сущностей. Уровень блоков представлен папкой <code>desktop.blocks</code>, а уровень страниц
— папкой <code>desktop.pages</code>. В конфигурационной папке
<a href="https://github.com/bem/project-stub/tree/14e24fd17ba66a357a2f6fcdce045065b4eb5d6c/.bem/levels">.bem/levels/</a>
есть инструкции, по которым bem tools понимают, что делать с уровнями разных
типов.</p>
<p>Выделяя в проекте блоки и бандлы, можно делать разные наборы блоков и разные
бандлы, собранные из этих наборов. Например, блоки для desktop и touch версий
сайта могут храниться в одном репозитории. И страницы, собранные из таких блоков
— тоже.</p>
<pre><code>├── desktop.blocks/
├── desktop.bundles/
├── touch.blocks/
└── touch.bundles/</code></pre>
<p>Возвращаясь к примерам из реального мира, не только кирпичики могут быть
модулями, но и детальки LEGO.</p>
<p><img src="http://img-fotki.yandex.ru/get/6704/14441195.30/0_7e0f6_f69c7d44_L.jpg" alt=""></p>
<p>Из них также можно построить дом. Немножечко другой, конечно.</p>
<p><img src="http://img-fotki.yandex.ru/get/9326/14441195.30/0_7e0f4_3d999550_L.jpg" alt=""></p>
<p>Если пойти дальше, вы можете выделить код блоков, общий для всех платформ, и
хранить его отдельно.</p>
<pre><code>├── common.blocks/
├── desktop.blocks/
├── desktop.bundles/
├── touch.blocks/
└── touch.bundles/</code></pre>
<p>С такой структурой desktop версия формируется из кода блоков уровней
<code>common.blocks</code> и <code>desktop.blocks</code>, а touch версия — из уровней <code>common.blocks</code>
и <code>touch.blocks</code>.</p>
<p><img src="http://img-fotki.yandex.ru/get/6725/14441195.30/0_7e0f5_3e107fd4_L.jpg" alt=""></p>
<p>И в заключении, я не перестаю радоваться идее проекта
<a href="https://github.com/bem/project-stub/">BEM project
stub</a>. Сама постоянно использую его,
начиная новые проекты. Туториал о
<a href="http://ru.bem.info/articles/start-with-project-stub/">старте проекта на полном стеке
БЭМ</a> показывает, как именно.
Так же БЭМ использует и знакомый, задавший мне вопрос. Я никогда раньше не
подозревала, что project stub позволяет начать работы с БЭМ без знания всего
того, что описано выше. :-)</p>
<p>Кстати, написав все это, я поняла, что описание основ БЭМ для меня несложно и
занимает разумное время. При этом (я надеюсь!), это очень полезно для других.
Так что спрашивайте всё, что вы хотите знать.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Блоки как кирпичи и бандлы как дома">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/blocks-and-bundles/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/blocks-and-bundles/</link><guid isPermaLink="true">http://varya.me/ru/posts/blocks-and-bundles/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Wed, 15 Jan 2014 00:00:00 GMT</pubDate></item><item><title><![CDATA[Бложик на bem tools 1.0.0alpha]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Бложик на bem tools 1.0.0alpha</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Бложик на bem tools 1.0.0alpha" property="og:title"/>
        <meta content="Бложик на bem tools 1.0.0alpha" property="og:description"/>
        <meta content="http://varya.me/ru/posts/bem-tools-100-alpha/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Бложик на bem tools 1.0.0alpha</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 11/1/2013</span><div><p><a href="http://bem.info/tools/bem/">bem tools</a> — пакет для сборки проекта с
БЭМ-структурой развивается семимильными шагами. На подходе версия 1.0.0. Точнее,
уже сейчас её можно использовать как alpha. Я попробовала на блоге, и уже этот
текст отображается со статикой, собранной <code>bem tools 1.0.0</code>.<excerpt/></p>
<p>Воспользоваться этой версией можно из ветки
<a href="https://github.com/bem/bem-tools/tree/release-1.0.0">release-1.0.0</a>, то есть
вместо версии написать в package.json</p>
<pre><code class="language-js">  &quot;dependencies&quot;: {
    ...
    &quot;bem&quot;: &quot;git://github.com/bem/bem-tools.git#7b07045b17ff&quot;,
    ...
  },
</code></pre>
<p>Или, ещё легче, структуру проекта можно позаимстровать из
<a href="https://github.com/bem/project-stub/tree/feature/bt-1.0.0">project-stub/feature/bt-1.0.0</a>.
Вообще <code>project-stub</code> очень удобное изобретение. Я все свои проекты начинаю с
него. Для перехода между версиями тоже отлично: просто делается сравнение
текущего проекта с другой веткой project-stub, и при применении всех изменений,
проект заводится из коробки.</p>
<p>Итак, что у нас нового? Не принципиально в проекте, а с моей пользовательской
точки зрения.</p>
<p>Появилась возможность складывать минимизированные файлы не в
<code>_page.css</code> и <code>_page.js</code>, а в файлы <code>page.min.css</code> и <code>page.min.js</code>. Кстати,
project-stub <a href="https://github.com/bem/project-stub/blob/142e92c58e2ecf0ea3b658f71c203fee214df8d1/.bem/make.js#L34">именно так и
настроен</a>.
Это для меня критичное изменение, потому что оно наконец-то дало возможность
использовать <code>bem tools</code> в блоге. Блог запущен на Jekyll, встроенном в GitHub,
то есть хостится на технологии gh-pages. По умолчанию gh-pages не показывает
файлы, начинающиеся с подчеркивания. Есть трюк — добавить в корень репозитория
файл <code>.nojekyll</code>, но тогда перестаёт работать Jekyll :-) В общем, мне
приходилось пользоваться <a href="https://github.com/enb-make/enb">ENB</a> ради единственной
фичи - возможности минимизировать в <code>page.min.*</code>. ENB хорош, но мейнстрим есть
мейнстрим, прехожу обратно на <code>bem tools</code>.</p>
<p>Еще одно важное user friendly изменение — уровни страниц теперь не содержат
папку <code>.bem</code> с настройками, по крайней мере по умолчанию. Все настройки
сосредоточены в папке <code>.bem</code> <a href="https://github.com/bem/project-stub/tree/5231f6a2de35dabfd2017574673e40a2a36ed435/.bem">в корне
проекта</a>.</p>
<p>Это изменеие не заметно, если начинать проект с project-stub и ничего не
менять. Тогда не важно, какая структура. А вот внесение изменений стало
психологически комфортнее. По крайней мере точно известно, что надо менять
<code>.bem</code> в корне.</p>
<p>Для доставки библиотек на проект теперь использутеся
<a href="https://github.com/bower/bower">Bower</a>, пакетный менеджер от Twitter. Про него
тоже интересно почитать.</p>
<p>Соответственно, в корне проекта появился файл
<a href="https://github.com/bem/project-stub/blob/5231f6a2de35dabfd2017574673e40a2a36ed435/bower.json">bower.json</a>
со списком библиотек.</p>
<pre><code class="language-js">{
    &quot;name&quot;: &quot;bem-project-stub&quot;,
    &quot;version&quot;: &quot;0.0.1&quot;,
    &quot;dependencies&quot;: {
        &quot;bem-core&quot;: &quot;9e5dc255421304fd652552c948cdf7af35dc8a68&quot;,
        &quot;bem-components&quot;: &quot;bem/bem-components&quot;
    }
}
</code></pre>
<p>И служебный файл <a href="https://github.com/bem/project-stub/blob/5231f6a2de35dabfd2017574673e40a2a36ed435/.bowerrc">.bowerrc</a>.</p>
<p>Вместе с новой версией <code>bem tools</code> блог теперь пользуется новыми библиотеками,
хотя вообще это не взаимосвязано — библиотеки могут быть использованы и со старым
сборщиком.</p>
<p>Вместо <code>bem-bl</code> в основе лежат блоки библиотеки <a href="https://github.com/bem/bem-core/tree/v1">bem-core</a>.
Она только только <a href="http://clubs.ya.ru/bem/replies.xml?item_no=4301">анонсирована</a>.
Миграция на библиотеку делается <a href="https://github.com/bem/bem-core/blob/v1/MIGRATION.ru.md">по инструкции</a>,
и она несложная. Несмотря на введение нового JavaScript-based синтаксиса для
BEMHTML шаблонов, старый лаконичный синтаксис тоже поддерживается. Так что в моём
случае нужно было только перевести JavaScript блоков на новую модульную систему.
<a href="https://github.com/varya/bem-js-tutorial">Туториал по BEM JavaScript</a> как обычно
— готовится.</p>
<p>Таким образом, сборка блога наконец-то вошла в относительно стабильное состояние,
а я теперь могу заниматься его контентом и улучшением frontend части.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Бложик на bem tools 1.0.0alpha">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/bem-tools-100-alpha/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/bem-tools-100-alpha/</link><guid isPermaLink="true">http://varya.me/ru/posts/bem-tools-100-alpha/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Fri, 01 Nov 2013 00:00:00 GMT</pubDate></item><item><title><![CDATA[Упражнения для дикции]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Упражнения для дикции</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Упражнения для дикции" property="og:title"/>
        <meta content="Упражнения для дикции" property="og:description"/>
        <meta content="http://varya.me/ru/posts/articulation-exercises/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Упражнения для дикции</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 6/1/2013</span><div><p>Этим упражнениям меня учили на моих первых курсах английского языка. Выглядит
смешно, но оказыватся полезным.<excerpt/></p>
<p>###Для губ</p>
<ol>
<li>Вытянуть губы в трубочку, растянуть улыбку со сведенными губами.</li>
<li>То же самое с открытыми губами.</li>
<li>Вытянуть «хоботок» и делать круговые движения.
1.Петь слитно: и, э, а, о, у, ы.</li>
<li>Произносить быстро:<br/>
пи, пи, пи,<br/>
пэ, пэ, пэ,<br/>
па, па, па,<br/>
по, по, по,<br/>
пу, пу, пу,<br/>
пы, пы, пы.</li>
<li>Попеременно: вытянуть губы, раскрыть рот.</li>
</ol>
<p>###Для челюсти</p>
<ol>
<li>Нижнюю челюсть в одну сторону, потом в другую. Верхняя челюсть неподвижна.</li>
<li>Открывать и закрывать рот, двигая нижнюю челють вниз.</li>
</ol>
<h3>Для языка</h3>
<p>Эти упражнения лучше делать с зеркалом. Может понадобиться платок, чтобы
вытирать рот.</p>
<ol>
<li>Вытянуть язык, сделать острым, потом растянуть.</li>
<li>Язык выглянул, напрягся, расслабился, спрятался.</li>
<li>Язык выглянул, направо, налево, прямо, спрятался.</li>
<li>Делать языком «часики»: направо, налево.</li>
<li>С закрытым ротом упираться языком в щёку и давить на неё.</li>
<li>Круговые движения с высунутым языком.</li>
<li>Рот открыт, язык напряженный. Доставать и убирать язык.</li>
<li>Кончиком языка гладить нёбо вперёд, назад.</li>
<li>Высунуть язык, делать движения вверх, вниз кончиком языка.</li>
<li>Упражнение «грибок»: плоский язык прижимать к нёбу.</li>
<li>Пощёлкать языком.</li>
<li>Сложить язык трубочкой.</li>
</ol>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Упражнения для дикции">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/articulation-exercises/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/articulation-exercises/</link><guid isPermaLink="true">http://varya.me/ru/posts/articulation-exercises/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Sat, 01 Jun 2013 00:00:00 GMT</pubDate></item><item><title><![CDATA[Мой опыт изучения английского]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Мой опыт изучения английского</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Мой опыт изучения английского" property="og:title"/>
        <meta content="Мой опыт изучения английского" property="og:description"/>
        <meta content="http://varya.me/ru/posts/learn-english/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Мой опыт изучения английского</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 4/2/2013</span><div><p>Я занимаюсь английским с осени 2008, начала с уровня Elementary, который мне
достался <nobr>со школы</nobr>. Какой уровень сейчас, можете посмотреть в <a href="/ru/content/">статьях и
выступлениях</a>, <nobr>или в коротком</nobr> видео <a href="http://bem.info/blog/2013/02/bem-goes-to-india/">BEM goes to
India</a>.</p>
<p>Многие просят поделиться <nobr>опытом и дать</nobr> совет, <nobr>так что — вот
он</nobr> пост в блог.<excerpt/><br/>
Отвечаю на самые частые <nobr>вопросы и</nobr> суммирую свой опыт.</p>
<h3>Преподаватель: native или русско-язычный?</h3>
<p>Этот вопрос задают чаще всего. Мой ответ — и тот, и другой.</p>
<p>Они учат по-разному, и самым мудрым решением будет чередовать их или
заниматься одновременно, если есть такая возможность.</p>
<p>Native хорош для преодоления барьера. Дело не только в знании языка, но и в
способности объяснить что угодно доступными средствами. Если изучаемый язык —
это единственный язык общения с преподавателем, то вы волей-неволей учитесь
выражать свои мысли <nobr>в условиях</nobr> ограниченного словарного запаса. Общение с native
учит быстро находить аналогии и простые объяснения сложным вещам.<br/>
С другой стороны, если у вас есть возможность погрузиться в среду без
преподавателя, нет смысла переплачивать за его происхождение.</p>
<p>Русскоязычный преподаватель хорош тем, что точно знает корни ваших ошибок и
может объяснить тонкости языка с подходящей именно вам позиции.
Например, есть много статей <nobr>и глав</nobr> <nobr>в книгах</nobr> по английской грамматике о том,
когда нужно употреблять who, <nobr>а когда —</nobr> whom (аналогично she/her, he/him и т.д.). Но
у русскоязычных практически никогда не бывает проблем <nobr>с этим</nobr>, потому что падежи
естественны для нашего родного языка. Гораздо лучше потратить время на необычные
для русского языковые конструкции.<br/>
Так что, русскоязычный преподаватель
заранее знает, какие вещи будут для вас сложны <nobr>из-за</nobr> вашего происхождения, и
заострит на них внимание. В случае ошибки, он не просто укажет <nobr>на
неё</nobr>,
но и расскажет <em>почему</em> вы ошиблись. Это касается и грамматики,
и произношения, <nobr>и лексики.</nobr></p>
<p>С точки зрения квалификации русскоязычный преподаватель почти наверняка будет
лучше, чем native. В основном у нас учат люди, 5 лет учившиеся в
университете именно преподаванию языка.
Тогда как одно только происхождение и знание родного языка <nobr>ещё не
делает</nobr> человека
хорошим преподавателем. Чтобы убедиться в этом, просто задумайтесь, сможете ли
вы без специальной подготовки научить иностранца русскому.<br/>
При этом можно и среди native найти профессионального преподавателя (у меня была
такая волшебная тётенька), но эти занятия могут быть в 2 раза дороже.<br/>
Хотя нельзя исключать такую вещь как <em>талант</em>. Несмотря на всё написанное выше,
мой самый лучший преподаватель — native, и у него нет специального образования.</p>
<h3>Групповые занятия или индивидуальные?</h3>
<p>Я начинала с групповых занятий, первые 2 года ходила на курсы. В середине 2-го
года начала занятия по Skype, и как только курсы закончились, продолжала заниматься
только индивидуально. Были попытки вернуться к занятиям в группе, но не особо
удачные, об этом ниже.</p>
<p>Могу однозначно сказать, что индивидуальные занятия или занятия в мини-группах
намного эффективнее. Но с групповых занятий очень хорошо начинать. Также нужно
учитывать, как ещё кроме занятий <nobr>на курсах</nobr> вы можете тренировать язык. Может так
оказаться, что курсы — ваша единственная возможность для широкой разговорной
практики. Тогда выбор будет другим.</p>
<h3>На какие курсы пойти?</h3>
<p>Часто спрашивают, на какие курсы пойти, и я всегда отвечаю «на самые дешевые».
Дело в том, что эффективность занятий в группе на 99,999% зависят от состава и
мотивированности группы. Найти хорошую группу вы можете только случайно, никакой
имидж курсов не может гарантировать вам хороших одногрупников.</p>
<p>В работе группы очень важна слаженность, всем стоит следовать замыслу
преподавателя, тогда обучение будет самым эффективным. Обычно это означает, что
вы (и все остальные) должны выполнять домашнее задание. Звучит банально, но это
правда самая важная вещь <nobr>в работе</nobr> группы.<br/>
Люди, не выполняющие домашние задания, забирают деньги у своих одногруппников.
Группа <nobr>не может</nobr> двигаться дальше, если какая-то её часть, даже меньше половины,
не освоила материал.</p>
<p>Поэтому не бойтесь придирчиво выбирать группу. Для этого на курсах обычно есть
пробные уроки: если вы хотите присоединиться уже после начала занятий, вам дадут
поприсутствовать на одном уроке.<br/>
Если вы попали в группу, которая тормозит — требуйте перевода в другую. Или
уходите <nobr>с курсов</nobr>.<br/>
Я практически потеряла свой первый год с безынициативной группой (хотя
преподаватель была просто чудесная) пока не осмелилась попросить перевода в
другую группу, где я сразу увидела разницу.</p>
<p>По тем же самым причинам я не жалую курсы на работе. Обычно мои коллеги очень
заняты, и <nobr>к занятиям</nobr> никто не готовится. По крайней мере в тех группах, на
занятиях которых пристуствовала я.<br/>
При этом очень эффективны занятия в группе с подростками: они всегда делают
задание, и у них всегда есть четкое представление, зачем они ходят на курсы.</p>
<h3>Сколько стоят занятия?</h3>
<p>#####Индивидуальные
~1300 с русскоязычным преподавателем за 90 минут, и ~1600 с
носителем языка. Если преподаватель очень крутой (кандидат наук или native с
профессиональным образованием), то цена может быть любой. Я встречала 3500 за 90
минут.</p>
<p>#####Индивидуальные занятия по Skype
На специальных сайтах-агрегаторах есть и по 500 рублей за 60 минут. Но учить за такие
деньги будут только тамошние сантехники, рассматривающие преподавание языка как
необременительную подработку. Занятия с опытным native преподавателем
начинаются <nobr>от 1000 рублей</nobr> <nobr>за 60 минут</nobr>.</p>
<p>#####Курсы в большой группе
Обычная группа — это 10-15 человек. Курсы стоят по-разному, зависит от бренда.
Минимум, который мне удавалось найти, 12 тысяч за семестр (сентябрь-декабрь или
январь-май). <nobr>При этом</nobr> цена повышается каждый год, и сейчас это уже тысяч 15.</p>
<h3>Можно ли заниматься без преподавателя?</h3>
<p>Как правило занятия без преподавателя помогают только поддерживать уровень
языка, <nobr>а не
повышать</nobr> его. Если только вы специально не нацелены на повышение уровня, о чём я
напишу ниже.</p>
<p>Также, чем ниже уровень, тем сложнее заниматься без преподавателя. Это
достаточно комфортно на Upper Intermediate и тем более Advanced, но трудно на
Pre-Intermediate.</p>
<p>И, независимо от уровня, если вы раньше не изучали язык системно и хотите
начать, удобнее сделать это с профессиональной помощью. Кроме самого языка вы
получаете структуру урока, которую в дальнейшем можно будет копировать дома, и
формируете свой режим.</p>
<h3>Сколько времени это всё занимает?</h3>
<p>Обычно на каждый уровень требуется один год, если заниматься 2 раза в неделю по
90 минут. Есть интенсивные курсы, где обещают уровень за 3 месяца (примерно 4
занятия в неделю <nobr>по 135 минут</nobr>). Но всё равно мозг так не работает, после
интенсива нужен перерыв и 3-4 уровня за год невозможны.</p>
<h3>Как организовать занятия?</h3>
<p>Ответ на этот вопрос скорее касается управления временем, а не изучения языка.
Просто нужно оценивать насколько для достижения долгосрочной цели важно сейчас
позаниматься или сейчас посмотреть футбол, и решать исходя из приорететов.</p>
<p>Как минимум, на занятия должно быть выделено время, в том числе и на выполнение
домашнего задания. Хорошо помечать это время в календаре, причем не в ночь до
сдачи задания, а хотя бы за день.</p>
<p>Первые 2 года я занималась каждый день: 2 раза в неделю <nobr>на курсах</nobr>, в остальные
дни — домашнее задание и дополнительные уроки. В середине 2-го года стало 2 раза
в неделю <nobr>на курсах</nobr>, 1 раз в неделю по Skype и остальные 4 дня — домашнее
задание.</p>
<h3>Что делать, если застрял на одном уровне?</h3>
<p>Очень эффективный способ сделать рывок — пройти подготовку к сдаче одного из
<a href="http://ru.wikipedia.org/wiki/ESOL">кэмбриджских экзаменов</a>. Сам экзамен можно
не сдавать, тем более, что они сильно платные. Но центры приёма экзамена
проводят и пробные экзамены, стоимость которых в районе <nobr>1000 рублей</nobr>. <nobr>На
такой</nobr> репетиции можно примерно оценить свой успех.</p>
<p>FCE подойдёт для
того, чтобы перейти с Intermediate на Upper Intermediate, CAE — чтобы достичь
уровня Advanced или укрепить его, и CPE для уровня Proficient.</p>
<p>Я сейчас занимаюсь по программе подготовки к CAE, и могу сказать, что даже на
моём уровне это challenge.</p>
<h2>Умные мысли</h2>
<p>Во владении языком я выделяю такие “столпы”:</p>
<ul>
<li>словарный запас</li>
<li>грамматика</li>
<li>беглость и естественность речи</li>
<li>восприятие на слух</li>
<li>произношение</li>
<li>чувство языка</li>
</ul>
<p>По поводу развития каждого из этих направлений есть свои соображения.</p>
<h3>Как запоминать новые слова</h3>
<p>Учить слова не обязательно, но если вы хотите, то можно. Я учу.</p>
<p>Для запоминания использую метод
<a href="http://en.wikipedia.org/wiki/Flashcard">flashcards</a>. В общем случае это
карточка со словом на одной стороне и переводом на другой. Естественно, в моём
случае &quot;карточки” электронные.</p>
<p>Я перепробовала множество приложений и для десктопа и для iPhone и остановилась
на Lingvo Tutor (в нём живёт смешной Бобёр), который идёт в комплекте со словарём Lingvo в версии для
Windows. Ради него я всегда держу на своём маке Windows, запущенную в Parallels
в когерентном режиме. А раньше, когда у меня была Ubuntu, я даже как-то хитро
готовила Wine для запуска Tutor. Эти факты должны дать вам понимание того,
насколько хорошим я считаю данное приложение :-)</p>
<p>Почему именно Бобёр:</p>
<ul>
<li>для правильного ответа слово нужно написать, а не выбрать из предложенных
вариантов;</li>
<li>умеет спрашивать перевод как с английского на русский, так и с русского на
английский;</li>
<li>озвучивает английские слова;</li>
<li>показывает транскрипцию.</li>
</ul>
<p>Необходимость писать слово самостоятельно гарантирует запоминание, а озвучивание
задействует не только визуальную, но и аудиальную память.</p>
<p>В моём словаре 10 тысяч слов, 6 из них я уже выучила. Цифра условна, потому что
простые слова, знакомые со школы, я туда не заношу.</p>
<p>В активном изучении у меня 50-100 слов. Они появляются там после занятия с
преподавателем, когда я заношу все новые слова после урока. Это помогает
подготовиться и более эффективно провести следующий урок.<br/>
Если слова слов в активной очереди стало меньше, я добавляю туда слова из
отложенной очереди.</p>
<p>В отложенную очередь слова попадают из книг, фильмов и интернета. Выученные
слова тоже регулярно перебираются в отложенную очередь в случайном порядке, ведь
их надо регулярно “вспоминать”.</p>
<p>Среди слов в словаре на изучение много фраз и выражений. Вообще слова удобнее
всего учить фразами.</p>
<p>Помимо активного пополнения словарного запаса есть ещё и пассивный — из чтения.</p>
<p>Начинать читать можно с книг по <a href="http://ru.wikipedia.org/wiki/%CC%E5%F2%EE%E4_%F7%F2%E5%ED%E8%FF_%C8%EB%FC%E8_%D4%F0%E0%ED%EA%E0">методу Ильи
Франка</a>.
Затем можно приняться за адаптированные книги издательств Macmillan и Penguin
Readers — у них есть переложенная классика и интересные книжки про
знаменитостей или про историю. Часто такие книжки идут с диском, можно
тренировать и слух.<br/>
И, наконец, читать обычные книги. Это возможно даже на Intermediate. А дальше —
больше. <nobr>С Upper Intermediate</nobr> можно начинать удивляться языковым конструкциям, с
Advanced — <nobr>по-настоящему</nobr> наслаждаться верно пойманным словом.</p>
<p>Когда читаешь, главное не зацикливаться на одной теме, потому что лексику очень
важно набрать из разных областей. Для этих целей у меня дома есть кулинарные
книги, анатомический словарь, учебник по колдовству и монография про
физику оптической передачи данных.<br/>
То же самое касается фильмов и сериалов. Мне было очень интересно смореть
Тюдоров, Рим и оба сериала про Борджиа: в результате около 1000 слов в моём
словаре — религиозные термины или средневековые ругательства. Хорошо бы
перемешать это с терминами из Computer Sience.</p>
<p>Выровнять свой словарный запас можно и специально читая тексты на разные заранее
подобранные темы:</p>
<ul>
<li><a href="http://www.english-online.at/a-z-topic-index.htm">A-Z Topic Index</a></li>
</ul>
<p>Ещё один способ пассивно расширять лексикон — подкасты. Конечно, самый
прекрасный подкаст — это <a href="http://www.eslpod.com/website/index_new.html">ESL
Pod</a>. По темпу речи и
разжеванности от расчитан на Intermediate, но я <nobr>всё равно</nobr> его иногда слушаю —
нравится.</p>
<p>Ещё подкасты:</p>
<ul>
<li><a href="http://www.bbc.co.uk/podcasts/series/tae">The English We Speak</a> by BBC</li>
<li><a href="http://www.listen-to-english.com/index.php?cat=podcasts">Listen to English</a> by Peter Carter</li>
<li><a href="http://www.npr.org/programs/ted-radio-hour/">TED Radio Hour</a></li>
<li><a href="http://www.npr.org/programs/ask-me-another/">Ask Me Another</a></li>
</ul>
<h3>Занятия грамматикой</h3>
<p>На уровнях до Upper Intermediate (включительно) нужны отдельные занятия
грамматикой. Обычно задания по грамматике есть в учебниках, но мне кажется, что
этого не достаточно, нужны отдельные книжки и выделенное на грамматику время.</p>
<ul>
<li>Голицынский, <a href="http://market.yandex.ru/model.xml?modelid=6384919&amp;hid=90829&amp;show-uid=436135713648985032">Грамматика</a></li>
<li>Raymond Murphy, <a href="http://market.yandex.ru/model.xml?modelid=1226404&amp;hid=90980&amp;show-uid=430779713648986143">Essential Grammar in
Use</a><br/>
Helen Nayor, <a href="http://market.yandex.ru/model.xml?modelid=1226446&amp;hid=90881">Essential Grammar in Use Supplementary
Exercises</a></li>
<li>Raymond Murphy, <a href="http://market.yandex.ru/model.xml?modelid=8186928&amp;hid=90829&amp;show-uid=486263413648985591">English Grammar in
Use</a><br/>
Raymon Murphy, <a href="http://market.yandex.ru/model.xml?modelid=8404419&amp;hid=90829&amp;show-uid=101532013648987912">English Grammar in Use Supplementary
Exercises</a></li>
<li>Martin Hewings, <a href="http://market.yandex.ru/model.xml?modelid=1155109&amp;hid=90980&amp;show-uid=574557113648988843">Advanced Grammar in
Use</a><br/>
Silmon Haines, <a href="http://market.yandex.ru/model.xml?modelid=1515345&amp;hid=90881&amp;show-uid=574557113648988841">Advanced Grammar in Use Supplementary
Exercises</a></li>
<li><a href="http://market.yandex.ru/model.xml?modelid=1454531&amp;hid=90880&amp;text=longman%20advanced%20grammar&amp;srnum=9">Advanced Learners'
Grammar</a></li>
</ul>
<h3>Беглая и естественная речь</h3>
<p>Единственный способ хорошо заговорить на иностранном языке — это говорить на
нём. Чтение книг и просмотр сериалов, в субтитрами или без — это хорошо. Но это
помогает достичь других целей.<br/>
Что касается речи, нужны места её применения. Это могут быть</p>
<ul>
<li>занятия с англоязычным преподавателем</li>
<li>couchsurfing<br/>
О своей цели практиковать язык лучше прямо в профайле и написать, так ваши
гости будут знать, чем они могут помочь.</li>
<li>посещение разговорного клуба</li>
<li>путешествия</li>
<li>свой подкаст</li>
<li>публичные выступления</li>
</ul>
<h3>Восприятие иностранного языка на слух</h3>
<p>На начальном этапе восприятие на слух можно тренировать при помощи подкастов
(список выше) и фильмов с субтитрами, постепенно от субтитров отказываясь.</p>
<p>Но нe для серьёзного развития, начиная с уровня Upper Intermediate (а может и
раньше), нужно слушать непрофессиональных дикторов. Мне очень хорошо подошли
подкасты для программистов. Они бывают самого разного качества, кто-то
записывает свой подкаст <nobr>в гараже</nobr> на непрофессиональном оборудовании, со всеми
шумами и свистами.</p>
<p>Если подходящих подкастов нет, восприятие на слух можно тренировать одновременно
с тренировкой речи, разговаривая с живыми людьми. Кроме клубов, для общения
есть <nobr>онлайн-сервисы</nobr>, например <a href="http://www.sharedtalk.com/">SharedTalk.com</a>.</p>
<p>Кроме того, оказалось, что на способность распознавать чужую речь очень сильно
влияет качество собственного произношения. Так что, я работаю над произношением
не только потому что говорю, но и потому что слушаю.</p>
<h3>Произношение и интонация</h3>
<p>Произношение очень сильно влияет на то, как вас понимают люди. Кажется, даже
больше чем общая грамотность и словарный запас.</p>
<p>Я занимаюсь по книгам <code>English Pronunciation in Use</code>. Сначала пробовала
заниматься самостоятельно, но это не дало ощутимых результатов, хотя я очень
старалась. Поэтому эти занятия у меня только под надзором преподавателя.</p>
<p>Кроме звуков я тренирую интонацию. Это оказалось сложнее и больше влияет на то,
понятно ли я говорю. Я использую для этого звукозаписывающие программы. Обычно
повторяю за диктором  (тут как раз важно выбрать профессионала или нейтива)
каждое предложение, всё записываю. Потом проигрываю подряд сначала диктора,
потом себя. Слышу разницу <nobr>и записываю</nobr> снова. <nobr>И так</nobr> миллион раз. Прогресс очень
медленный, но я <nobr>не нашла</nobr> способа сделать лучше.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Мой опыт изучения английского">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/learn-english/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/learn-english/</link><guid isPermaLink="true">http://varya.me/ru/posts/learn-english/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Tue, 02 Apr 2013 00:00:00 GMT</pubDate></item><item><title><![CDATA[10 ошибок XSLT-программистов]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>10 ошибок XSLT-программистов</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="10 ошибок XSLT-программистов" property="og:title"/>
        <meta content="10 ошибок XSLT-программистов" property="og:description"/>
        <meta content="http://varya.me/ru/posts/ten-xslt-mistakes/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">10 ошибок XSLT-программистов</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 8/12/2010</span><div><p>Перевод <a href="http://saxonica.blogharbor.com/blog/_archives/2010/6/11/4550606.html">статьи &quot;The ten most common XSLT programming
mistakes&quot;</a>,
ссылка на которую недавно опубликована в <a href="http://clubs.ya.ru/xslt/">клубе XSLT на
Я.ру</a>.</p>
<p>Недавно я сказал в ответ пользователю, что он попадает в наиболее
распространённые ловушки для программистов на XSLT. Вместо того, чтобы быть
раздраженным, что я почти ожидал, он поблагодарил меня и спросил, не мог бы я
рассказать ему о двугих ловушках.<excerpt/> Некоторые из нас помогают людям избежать этих
ловушек в течение многих лет, но, несмотря на это, я не припомню, чтобы видел
список таких ловушек. Так что я решил потратить полчаса, чтобы составить такой
список.</p>
<ul>
<li>Обрабатывать элементы в дефолтном пространстве имён (namespace). Если
исходный XML-документ содержит декларацию дефолтного пространства имён
<code>xmlns=&quot;something&quot;</code>, то каждый раз, когда вы ссылаетесь на имя элемента в
XPath-выражении или значении атрибута match, вы должны ясно давать понять, что
вы имеете в виду элементы из этого пространства имён. В XSLT 1.0 вы должны
связать префикс с этим пространством имён (например <code>xmlns:p=&quot;something&quot;</code> в
элементе <code>xsl:stylesheet</code>) и затем везде использовать этот префикс, напимер,
<code>match=&quot;p:chapter/p:section&quot;</code>. В XSLT 2.0 есть альтернатива - задекларировать в
элементе xslt:stylesheet <code>default-xpath-namespace=&quot;something&quot;</code>.</li>
<li>Использование относительных путей. xsl:apply и xsl:for-each принимают текущий
узел; в рамках &quot;цикла&quot; пути должны быть написаны относительно текущего узла.
Например,</li>
</ul>
<p>&lt;xsl:for-each select=&quot;chapter&quot;&gt;&lt;xsl:value-of select=&quot;title&quot;/&gt;&lt;/xsl:for-each&gt;</p>
<p>Распространённая ошибка - использование абсолютных путей внутри цикла (например <em>select=&quot;//title&quot;</em>) или повторение имени контекстного узла в относительном пути (<em>select=&quot;chapter/title&quot;</em>).</li></p>
  <li>Переменные содержат значения, а не фрагменты синтаксических выражений. Некоторые люди думают, что ссылка на переменную $x подобна макросу, распространяющемуся и на синтаксис xPath-выражений путйм буквального замещения - как в языках типа shell. Это не так: вы можете использовать переменные только там, где вы можете использовать значение. Например, если $N содержит строку 'para', то выражение <em>chapter/$N</em> не означает того же, что и <em>chapter/para</em>. Вместо этого вам нужно <em>chapter/*[name()=$N]</em>. Если переменная содержит что-то более сложное, чем просто имя (например, запись xPath-пути), вам понадобится расширение, подобное saxon:evaluate(), чтобы вычислить это.</li>
  <li>Шаблонные правила <em>xsl:apply-templates</em> - это не расширенные возможности языка для подвинутых пользователей. Это самые основные, фундаментальные конструкции в XSLT. Не откладывайте тот день, когда вы начнёте их использовать. Если вы не используете их, вы делаете свою жизнь излишне сложной.</li>
  <li>XSLT принимает дерево на вход и отдаёт дерево на выходе. Непонимание этого является причиной многих разочарований, которые возникают у новичков в XSLT. XSLT не может обработать вещи, которые не представлены в дереве, предоставленном XML-парсером (области CDATA, ссылки на сущности (entity), XML-декларация), и не может сгенерировать эти вещи на выходе. Если вы думаете, что вам это необходимо, спросите "почему?". Возможно что-то не так с вашими требованиями или замыслом.</li>
  <li>Пространства имён (namespace) - это трудно. Нет лёгкого способа опровергнуть это. Возможно, это требует отдельной статьи. Разгадка в понимании модели пространств имён. Пространства имён проявляются в двух ипостасях:
<ol>  <li>Каждый элемент или атрибут имеет имя, состоящее из префикса, собственно имени и URI.</li>
  <li>Элементы обладают узлами пространств имён, представляющими все префикс-uri соответствия в границах этого элемента.</li>
</ol>
Когда вы поймёте это, вы сможете понять особенности различных правил и их влияние на пространства имён в результирующем дереве. Чаще всего, всё, что вам нужно делать, это гарантировать, что создаваемые вами элементы находятся в верном пространстве имён, всё остальное произойдёт само собой.
</li>
  <li>Не используйте <em>disable-output-escaping</em>. Некоторые люди используют эту магическую приправу, но не понимают, что она делает. Они надеются, что это может заставить код работать лучше. Этот атрибут только для профессионалов, и профессионалы используют это только как последнее средство спасения. В 95% случаях, если вы встретили в преобразовании <em>disable-output-escaping</em>, это говорит о том, что автор был новичком, не понимающим, что он делает.</li>
  <li>Инструкция <em><xsl:copy-of></em> создаёт точную копию исходного дерева, пространств имён и всего остального. (Есть исключение - в XSLT 2.0 вы можете сказать <em>copy-namespaces="no"</em>). Если вы хотите скопировать дерево с изменениями, вы не можете использовать <em>xsl:copy-of</em>. Вместо этого используйте шаблон идентичного преобразования: шаблон, который использует создание поверхностной копии элемента и применяет <em>applies-templates</em> ко всем его потомкам, дополненный шаблонами, переопределяющими это поведение для отдельных элементов.</li>
  <li>Не используйте
[cc lang="xml"]
<xsl:variable name="x"><xsl:value-of select="y"/></xsl:variable>
[/cc]
Вместо этого используйте
[cc lang="xml"]
<xsl:variable name="x" select="y"/>
[/cc]
Последняя запись короче, более действенна при исполнении, и в любом случае она корректна.</li>
  <li>Когда вам нужно найти информацию, используйте ключи. Также как и в случае с шаблонами, не откладывайте изучение использования ключей и не выбрасыйте их из головы как "продвинутую" возможность. Это важнейший инструмент разработки. Поиск информации без использования ключей сродни забиванию гвоздей отвёрткой.</li>
</ol>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for 10 ошибок XSLT-программистов">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/ten-xslt-mistakes/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/ten-xslt-mistakes/</link><guid isPermaLink="true">http://varya.me/ru/posts/ten-xslt-mistakes/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Thu, 12 Aug 2010 00:00:00 GMT</pubDate></item><item><title><![CDATA[Эффективное использование рекурсии в XSL]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Эффективное использование рекурсии в XSL</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Эффективное использование рекурсии в XSL" property="og:title"/>
        <meta content="Эффективное использование рекурсии в XSL" property="og:description"/>
        <meta content="http://varya.me/ru/posts/xslt-recursion/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Эффективное использование рекурсии в XSL</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 8/1/2009</span><div><p>Перевод статьи <a href="http://www.ibm.com/developerworks/xml/library/x-xslrecur/">Use recursion effectively in XSL</a>.
Введение в XSL-рекурсию и приёмы для оптимизации её использования.</p>
<p>Эффективное и рациональное использование XSL-преобразований требует понимания,
как использовать XSL в качестве функционального языка, что означает понимание рекурсии.
Эта статья знакомит с ключевыми идеями рекурсии и особенностей её использования
в XSL.<excerpt/> Также объяснены приёмы для оптимизации преобразования XML и избегания ошибок
при использовании рекурсии. Каждая идея или метод сопровождаются примерами кода.</p>
<p>Сейчас в мире преобладают императивные языки программирования. Наиболее популярные языки - Java, C (и его различные
виды), Visual Basic и другие - на высоком абстрактном уровне работают, в основном, одинаково: вы задаёте некоторые
переменные, вызываете функции или операторы, которые меняют эти переменные, и возвращаете результат. Это сильное
приближение к программированию, и это, конечно, не всё.</p>
<p>Языки программирования другой породы, пока менее привычной, по крайней мере также сильны как их процедурные &quot;коллеги&quot;.
Эти языки названы <em>функциональными</em> или <em>декларативными</em> языками. Программы, написанные на этих языках, могут только
однажды определить переменные, и никогда не могут поменять хранимое значение однажды определённой переменной. Язык
программирования XSL и функциональный, и декларативный. Это означает, что разработчики, привыкшие писать на Java или C,
и изучающие XSL часто чувствуют себя не в своей тарелке, применяя самые передовые особенности XSL.</p>
<p>Из-за роста важности как приложений, так и web-разработчиков и завязанности на XSL-технологию, эффективное использование
XSL-преобразований не может быть проигнорировано. Так, наиболее важно научиться, как программировать в декларативной
манере. Это подразумевает близкое знакомство с <strong>рекурсией</strong>, основанное на методах её эффективного
использования и рационального решения текущих задач.</p>
<h2>Введение в рекурсию на примере</h2>
<p>Через использование рекурсивных функций декларативные языки способны предоставлять функциональность, подобную функциональности их императивных &quot;коллег&quot;. Это не значит, что императивные языки не могут использовать рекурсию. Большинство - могут. Разница в том, что декларативные языки используют рекурсию как основное средство деятельности, тогда как чаще всего это просто свойство в императивных языках.</p>
<p>Рассмотрим функцию, которая высчитывает факториал от некоторого положительного целого. Вкратце, факториал числа - это число, полученное путём умножения всех предшествующих ему чисел. Так, факториал от 4 (или 4!) - 1<em>2</em>3*4 = 24. Распечатка 1 показывает один из способов написать эту функцию на Java:</p>
<h4>Распечатка 1. Решение задачи про факториал с использованием цикла на Java</h4>
<pre><code class="language-java">public int factorial(int number) {
    if (number &lt;= 1) return 1;
    int result = 1;
    for (int i=1; i &lt;= number; i++) {
        result *= i;
    }
    return result;
}
</code></pre>
<p>Пока это совершенно разумный код, он действительно пользуется тем фактом, что вы можете переопределить значения переменных в Java-программе. Без этой роскоши вы можете только решать задачу определением функций, как в Распечатке 2.</p>
<h4>Распечатка 2. Решение задачи про факториал с использованием рекурсии на Java</h4>
<pre><code class="language-java">public int factorial(int number) {
    if (number &lt;= 1) return 1;
    return number * factorial(number-1);
}
</code></pre>
<p>Результаты вызова этих двух реализаций вычисления факториала одинаковы. Вызов функции <em>factorial()</em> в теле метода
показывает, что вторая реализации использует рекурсию. Этот метод может быть визуально представлен как лестница.
Программа многократно спускается вниз, вызывая саму себя, собирая статическую информацию для каждого вызова пока не
упрется в условие выхода из рекурсии. Достигнув конца, она идёт обратно, возвращая различные состояния уже сделанных
вызовов, объединяя информацию, собранную на пути вниз, для получения финального результата. Пример про факториал показан
на рисунке.</p>
<img src="http://www.ibm.com/developerworks/xml/library/x-xslrecur/steps.gif" alt="Представление рекурсии в виде лестницы" />
<p>В общем случае, рецепт создания рекурсивной функции включает в себя три ингредиента: условие выхода, код операции и рекурсивный вызов самого себя. В случае факториала, я вычисляю его для n путём вычисления факториала для n-1, n-2, n-3 и т.д. пока функция не достигнет условия выхода из серии - значения 1.</p>
<p>Так, если сейчас идея рекурсии ещё кажется немного смущающей, вы могли бы прервать чтение этой статьи и либо проследовать по некоторым ссылкам на эту тему в разделе <a href="http://www.ibm.com/developerworks/xml/library/x-xslrecur/#resources">Ресурсы</a>, либо попробовать написать несколько функций самостоятельно (например, напишите функцию для расчёта n-го числа из ряда Фибоначчи).</p>
<h2>Общие использования рекурсии в XSL</h2>
<p>Два общих сценария использования рекурсии в XSL такие:</p>
<ul>
<li>Когда у вас есть набор повторяющихся значений в исходном XML, и вы хотите, чтобы результат преобразования отражал что-то, касающееся всех этих значений. Например, если у вас есть каталог товаров в XML, и вы хотите представить эти товары в соответствии с общей ценой, вы захотите найти совокупную цену, используя рекурсивный шаблон.</li></li>
<li>Когда исходный XML содержит число <em>x</em> в теге, например &lt;countTo number=&quot;5&quot;/&gt;, и вы хотите представить некоторую информацию <em>x</em> раз в результирующей выдаче. Факториал - типичный пример такого случая, но я рассмотрю более сложный пример немного позже.</li></li>
</ul>
<p>Я покажу рекурсивное решение, написанное на XSL для обоих сценариев, но сначала давайте взглянем на пример про факториал, решенный на XSL:</p>
<h4>Распечатка 3. Решение задачи про факториал с использованием рекурсии на XSL</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;factorial&quot;&gt;
  &lt;xsl:param name=&quot;number&quot; select=&quot;1&quot;/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test=&quot;$number &lt;= 1&quot;&gt;
      &lt;xsl:value-of select=&quot;1&quot;/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name=&quot;recursive_result&quot;&gt;
        &lt;xsl:call-template name=&quot;factorial&quot;&gt;
          &lt;xsl:with-param name=&quot;number&quot; select=&quot;$number - 1&quot;/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:value-of select=&quot;$number * $recursive_result&quot;/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Этот шаблон содержит все &quot;игредиенты&quot; из рецепта для Java-рекурсии. Здесь есть условие выхода (проверка на равенство единице или нет): если условие выхода не выполняется, шаблон делает рекурсивный вызов самого себя (хранимый в переменной <em>recursive_result</em>). Наконец, для получения конечного результата совершается операция умножения между исходным числом и рекурсивно полученным значением. Вы также могли заметить, что XSL частно требует намного больше кода, чем решение той же задачи в других языках. Это всего лишь часть неоднозначностей в языке преобразования, который согласовывается с XML.</p>
<p>###Рекурсия, вариант 1: Суммирование сквозь множество элементов</p>
<p>Теперь вы можете применить такой же метод, как и в примере с факториалом из <em>Распечатки 3</em>, чтобы найти общую стоимость товаров в XML-каталоге. Фактически, решение аналогично решению задачи с факториалом, за исключением того, что вы будете использовать сложение вместо умножения и набор узлов как исходную информацию вместо числа.</p>
<p>Предположим, у вас есть каталог товаров, который выглядит походим на XML в <em>Распечатке 4</em> (кстати, вы можете скачать весь XML и XSL, и весь другой код из этой статьи по ссылке в <a href="http://www.ibm.com/developerworks/xml/library/x-xslrecur/#resources">Ресурсах</a>).</p>
<h4>Распечатка 4. Пример XML с продуктами</h4>
<pre><code class="language-xml">&lt;Products&gt;
  &lt;Product&gt;
    &lt;Name&gt;Gadget&lt;/Name&gt;
    &lt;Price&gt;$10.00&lt;/Price&gt;
  &lt;/Product&gt;
  &lt;Product&gt;
    &lt;Name&gt;Gizmo&lt;/Name&gt;
    &lt;Price&gt;$7.50&lt;/Price&gt;
  &lt;/Product&gt;
  ...
 &lt;/Products&gt;
</code></pre>
<p>Цель в том, чтобы добавить первую цену из этого списка товаров к сумме всех других цен, пока вы не получите суммарный
результат. Вы можете осуществить это при помощи XSL, показанного в <em>Распечатке 5</em>.</p>
<h4>Распечатка 5. Проход по узлам с использованием обычной XSL-рекурсии</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;priceSum&quot;&gt;
  &lt;xsl:param name=&quot;productList&quot;/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test=&quot;$productList&quot;&gt;
        &lt;xsl:variable name=&quot;recursive_result&quot;&gt;
          &lt;xsl:call-template name=&quot;priceSum&quot;&gt;
            &lt;xsl:with-param name=&quot;productList&quot;
              select=&quot;$productList[position() &gt; 1]&quot;/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:value-of
          select=&quot;number(substring-after($productList[1]/Price,'</div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

))
                  + $recursive_result&quot;/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;0&quot;/&gt;&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>В этом случае вы вызываете функцию на постепенно уменьшающемся списке товаров, каждый раз добавляя первый элемент в список к рекурсивному вызову на остальных элементах списка. Когда список получается пустым, условие выхода достигнуто и вы добавляете ноль к результату, что не изменит сумму. Этот метод работы на всё меньшем и меньшем наборе узлов может быть использован во многих случаях.</p>
<h3>Рекурсия, вариант 2: Итерация на числе</h3>
<p>Вторая задача, с которой сталкиваются XSL-программисты, возникает, когда число содержится в некоторых случаях в исходном XML, и программисту нужно решить задачу это число раз. Например, XML может выключать информацию о сетке с некоторыми числами строк и столбцов, и преобразование необходимое для обеспечения визуального расположения сетки в HTML или каком-либо другом формате.</p>
<p>Решение, как правило используемое разработчиками, незнакомыми с рекурсивными методами - это написать программу, которая разбирает XML и дополняет элементами для каждого ряда или столбца. Однажды написанный элемент &lt;xsl:for-each&gt; может решить задачу без рекурсивных шаблонов. Несмотря на то, что это решение обеспечивает подходящую выдачу, у него есть большой недостаток. Этот метод на самом деле удваивает объём работы для обеспечения финального результата преобразования. Этот недостаток чрезвычайно заметен в клиент-серверной модели, когда сервер посылает XML и XSL для преобразования на клиентской стороне. В таком случае всё продуктивности, обычно реализованные на сервере, теряются за счёт увеличения XML.</p>
<p>Лучшее решение - использовать рекурсивные шаблоны, чтобы выполнять работы полностью в рамках преобразования. Рассмотрим получение таблицы умножения из XML-элемента в виде HTML. Входная информация будет содержать следующую строку:</p>
<pre><code class="language-xml">&lt;MultiplicationTable Rows=&quot;3&quot; Columns=&quot;4&quot;/&gt;
</code></pre>
<p>Цель состоит в том, чтобы преобразовать это в HTML, представляющий таблицу, похожую на:</p>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<td></td>
<td><strong>1</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
</tr>
<tr>
<td><strong>1</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td>2</td>
<td>4</td>
<td>6</td>
<td>8</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td>3</td>
<td>6</td>
<td>9</td>
<td>12</td>
</tr>
</table>
<p>Этот пример кое в чём более сложный, чем первые два. В этом случае вы не просто возвращаете функциональный результат, представляющий решение проблемы, но вы всего лишь выдадите HTML как шаг рекурсивного процесса. Также вам необходимо соединить вместе два рекурсивных шаблона - один для рядов, другой для столбцов.</p>
<h4>Распечатка 6. Повторение по числу с использованием основной XSL-рекурсии</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;drawRow&quot;&gt;
  &lt;xsl:param name=&quot;currentRow&quot;/&gt;
  &lt;xsl:param name=&quot;totalRows&quot;/&gt;
  &lt;xsl:param name=&quot;totalCols&quot;/&gt;
  &lt;xsl:if test=&quot;$currentRow &lt;= $totalRows&quot;&gt;
    &lt;tr&gt;
      &lt;xsl:call-template name=&quot;drawCell&quot;&gt;
        &lt;xsl:with-param name=&quot;currentRow&quot; select=&quot;$currentRow&quot;/&gt;
        &lt;xsl:with-param name=&quot;currentCol&quot; select=&quot;0&quot;/&gt;
        &lt;xsl:with-param name=&quot;totalCols&quot; select=&quot;$totalCols&quot;/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/tr&gt;
    &lt;xsl:call-template name=&quot;drawRow&quot;&gt;
      &lt;xsl:with-param name=&quot;currentRow&quot; select=&quot;$currentRow  + 1&quot;/&gt;
      &lt;xsl:with-param name=&quot;totalRows&quot; select=&quot;$totalRows&quot;/&gt;
      &lt;xsl:with-param name=&quot;totalCols&quot; select=&quot;$totalCols&quot;/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;drawCell&quot;&gt;
  &lt;xsl:param name=&quot;currentRow&quot;/&gt;
  &lt;xsl:param name=&quot;currentCol&quot;/&gt;
  &lt;xsl:param name=&quot;totalCols&quot;/&gt;
  &lt;xsl:if test=&quot;$currentCol &lt;= $totalCols&quot;&gt;
    &lt;xsl:variable name=&quot;bgColor&quot;&gt;...&lt;/xsl:variable&gt;
    &lt;xsl:variable name=&quot;value&quot;&gt;...&lt;/xsl:variable&gt;
    &lt;td bgcolor=&quot;{$bgColor}&quot; align=&quot;center&quot; valign=&quot;top&quot;&gt;
      &lt;xsl:value-of select=&quot;$value&quot;/&gt;
    &lt;/td&gt;
    &lt;xsl:call-template name=&quot;drawCell&quot;&gt;
      &lt;xsl:with-param name=&quot;currentRow&quot; select=&quot;$currentRow&quot;/&gt;
      &lt;xsl:with-param name=&quot;currentCol&quot; select=&quot;$currentCol + 1&quot;/&gt;
      &lt;xsl:with-param name=&quot;totalCols&quot; select=&quot;$totalCols&quot;/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>В этом случае я использую два отдельный рекурсивных шаблона. Вначале рекурсивно рисую ряды пока не достигну условия выхода. Этот шаблон использует второй рекурсивный шаблон, чтобы нарисовать ячейки для каждого столбца в ряду. Этот общий метод применим для многоуровневого представления данных.</p>
<h2>Оптимизация паттернов рекурсии в XSL</h2>
<p>К сожалению, использование рекурсии во многих XSL-процессорах имеет один значительный недостаток при работе с большими объемами данных. Также слишком легко достигнуть переполнения стека (Stack Overflow) или нехватки памяти (Out of Memory) с функциями, которые достигают глубины порядка 10000. Если вы пытаетесь суммировать цены в каталоге с более чем 10000 товарами, вы можете столкнуться с проблемами.</p>
<p>К счастью, есть пути по оптимизации рекурсивных функций, чтобы уменьшить или даже исключить глубину рекурсии, вытекающую из заданного шаблона. Оставшаяся часть этой статьи представляет четыре способа оптимизировать то, как вы пишете ваши рекурсивные решения на XSL.</p>
<h3>Оптимизация рекурсии 1. Разделяй и властвуй</h3>
<p>Вспомните первый пример, в котором мы пытались найти общую цену, суммировав все цены для нескольких товаров в XML-каталоге. Первоначальный подход - это добавить цену первого товара к сумме всех остальных, и делать это рекурсивно, пока вы не переберёте весь лист. При использовании этого подхода глубина рекурсии равна числу товаров в списке. Сейчас цель состоит в том, чтобы изменить метод так, чтобы вы получили тот же результат без вхождения в рекурсию так глубоко.</p>
<p>Другой подход к этой проблеме - это разделить список на множество меньших частей и делать так рекурсивно, пока вы не разделите каждую часть на отдельные продукты. Самый простой путь представить это - разделение списка напополам, делая рекурсивный вызов на каждой половине и тогда сделать отдельные рекурсивные вызовы на двух получившихся списках. Это позволит завершить всю работу на одной половине,  до того как какая-то работа будет сделана на другой половине. Процесс обработки будет древовидный, а не линейный (похожий на лестницу) из первого решения. <em>Рисунок 2</em> показывает это рекурсивное дерево.</p>
<img src="http://www.ibm.com/developerworks/xml/library/x-xslrecur/tree.gif" alt="" />
<p>Используя подход &quot;разделяй и властвуй&quot;, вы не ощутите никакой экономии, в цифрах, по числу операций сложения, которые должны быть выполнены. Экономия будет заключаться в том, что операции сложения не ожидают того, чтобы все числа были получены и поставлены в очередь в стек рекурсии для выполнения операции. XSL-код в <em>Распечатке 7</em> показывает такой способ.</p>
<h4>Распечатка 7. Прохождение по узлам с использованием метода &quot;разделяй и властвуй&quot;</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;priceSumDivideAndConquer&quot;&gt;
  &lt;xsl:param name=&quot;productList&quot;/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test=&quot;count($productList) = 1&quot;&gt;
        &lt;xsl:value-of
          select=&quot;number(substring-after($productList[1]/Price,'</div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

))&quot;/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test=&quot;$productList&quot;&gt;
        &lt;xsl:variable name=&quot;halfIndex&quot;
          select=&quot;floor(count($productList) div 2)&quot;/&gt;
        &lt;xsl:variable name=&quot;recursive_result1&quot;&gt;
          &lt;xsl:call-template name=&quot;priceSumDivideAndConquer&quot;&gt;
            &lt;xsl:with-param name=&quot;productList&quot;
              select=&quot;$productList[position() &amp;lt;= $halfIndex]&quot;/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:variable name=&quot;recursive_result2&quot;&gt;
          &lt;xsl:call-template name=&quot;priceSumDivideAndConquer&quot;&gt;
            &lt;xsl:with-param name=&quot;productList&quot;
              select=&quot;$productList[position() &amp;gt; $halfIndex]&quot;/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:variable&gt;
      &lt;xsl:value-of select=&quot;$recursive_result1 + $recursive_result2&quot;/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;0&quot;/&gt;&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Операция сложения происходит каждый раз, когда разделённый список достигает длины 1 (это является условием выхода), и производится до того, как какая-нибудь обработка произойдёт со второй частью листа. При использовании этой техники глубина рекурсии никогда не превысит log<sub>2</sub> от количества элементов в списке, что, конечно, экспоненциально увеличивает возможное число товаров в списке для этого подсчёта.</p>
<h3>Оптимизация рекурсии 2. Сегментация</h3>
<p>Несмотря на невероятную экономию глубины рекурсии, обеспеченные методом &quot;Разделяй и властвуй&quot;, у него действительно есть недостатки. Для списков длиной не выражается числом степени двойки, этот способ излишне накладный на концах рекурсионного дерева.</p>
<p>Другой подход, который похоже уменьшает глубину рекурсии, работающий на итерациях через сегменты узлов предопределённой длины, предпочтительнее, чем деление узлов надвое каждый раз. Этот подход построен на базовой рекурсивной методике, но представлен внешним шаблоном, который действует как менеджер сегментации.</p>
<p>Роль менеджера сегментации состоит в том, чтобы разбить большую задачу на маленькие, которые могут быть проработаны без появления утечек памяти. Менеджер хранит результаты этих маленьких заданий и в тот момент, когда они все завершены, выполняет необходимую операцию над этими результатами.</p>
<p>Вы можете видеть пример техники Сегментации в шаблоне <em>Распечатки 8</em>, который берёт список узлов и длину сегмента и использует оригинальный шаблон для цен на этих маленьких частях.</p>
<h4>Распечатка 8. Обход узлов с использованием техники сегментации</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;priceSumSegmented&quot;&gt;
  &lt;xsl:param name=&quot;productList&quot;/&gt;
  &lt;xsl:param name=&quot;segmentLength&quot; select=&quot;5&quot;/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test=&quot;count($productList) &gt; 0&quot;&gt;
      &lt;xsl:variable name=&quot;recursive_result1&quot;&gt;
        &lt;xsl:call-template name=&quot;priceSum&quot;&gt;
          &lt;xsl:with-param name=&quot;productList&quot;
            select=&quot;$productList[position() &lt;= $segmentLength]&quot;/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name=&quot;recursive_result2&quot;&gt;
        &lt;xsl:call-template name=&quot;priceSumSegmented&quot;&gt;
          &lt;xsl:with-param name=&quot;productList&quot;
            select=&quot;$productList[position() &gt; $segmentLength]&quot;/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:value-of select=&quot;$recursive_result1 + $recursive_result2&quot;/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;0&quot;/&gt;&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Использование подхода Сегментации лучше, чем подхода &quot;Разделяй и властвуй&quot; уменьшает накладные расходы в большинстве случаев, но не предлагает особенной выгоды по глубине рекурсии. Какой же следует использовать? Ответ - как вы можете увидеть по следующей оптимизации - оба.</p>
<h3>Оптимизация рекурсии 3. Сочетание Сегментации и &quot;Разделяй и властвуй&quot;</h3>
<p>Вы можете объединить техники &quot;Разделяй и властвуй&quot; и Сегоментации, чтобы</p>
<ol>
<li>увеличить экномию за счёт снижения глубины рекурсии (включая накладную обработку, связанную
с каждый добавлением уровня используемой рекурсии)</li>
<li>избежать накладных расходов на уровне листочков рекурсионного дерева</li>
</ol>
<p>В этом способе пороговый уровень передаётся в рекурсивный шаблон, через список узлов (или другие данные, которыми опрерируют). Здесь &quot;Разделяй и властвуй&quot; изменён, чтобы работать как менеджер сегментации. Если размер переданного списка больше, чем пороговое значение, список делится надвое и шаблон рекурсивно вызывается для обеих половин. Другими словами, вы используете основной рекурсивный шаблон, чтобы вычислять результаты, как и в Сегментации.
<em>Распечатка 9</em> показывает этот способ на следующих XSL-шаблонах.</p>
<h4>Распечатка 9. Обход узлов с использованием составной техники &quot;Разделяй и властвуй&quot; и Сегментации</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;priceSumCombination&quot;&gt;
  &lt;xsl:param name=&quot;productList&quot;/&gt;
  &lt;xsl:param name=&quot;threshold&quot; select=&quot;5&quot;/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test=&quot;count($productList) &gt; $threshold&quot;&gt;
      &lt;xsl:variable name=&quot;halfIndex&quot;
        select=&quot;floor(count($productList) div 2)&quot;/&gt;
      &lt;xsl:variable name=&quot;recursive_result1&quot;&gt;
        &lt;xsl:call-template name=&quot;priceSumCombination&quot;&gt;
          &lt;xsl:with-param name=&quot;productList&quot;
            select=&quot;$productList[position() &lt;= $halfIndex]&quot;/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name=&quot;recursive_result2&quot;&gt;
        &lt;xsl:call-template name=&quot;priceSumCombination&quot;&gt;
          &lt;xsl:with-param name=&quot;productList&quot;
            select=&quot;$productList[position() &gt; $halfIndex]&quot;/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:value-of select=&quot;$recursive_result1 + $recursive_result2&quot;/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:call-template name=&quot;priceSum&quot;&gt;
        &lt;xsl:with-param name=&quot;productList&quot; select=&quot;$productList&quot;/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>###Оптимизация рекурсии 4. Tail Recursion</p>
<p>У вас уже есть какой-то опыт по отношению к рекурсии и вы, возможно, удивлены, почему метод Tail Recursion не первый в способах оптимизации, с тех пор как этот способ может устранить глубокую рекурсию полностью без каких-либо накладных расходов. Несмотря на преимущества, которые этот способ предлагает, он требует, чтобы XSLT-процессор, производя эту трансформацию, распознавал присутствие этой техники в XSL-коде и изменял бы своё поведение для обеспечения этой техники. К сожалению, большинство XSL-процессоров не предлагают такую возможность.</p>
<p>Хорошая новость состоит в том, что непомерное одобрение XSL в бизнесе и научном мире означает, что это ограничение просуществует недолго. По этой причине для разработчиков важно понимать, как происходит отрубание хвоста, как оно может исключить проблемы с памятью без задерживания представления в любом достойном виде.</p>
<p>Основная идея Tail Recursion - это избавление от хранения какой-либо статической информации в рекурсивных шагах. Вся информация, которая нужна, на каждом шаге передаётся как параметры функции вместо того, чтобы храниться на более высоком уровне в стеке рекурсии. Это позволяет XSLT-процессору работать с рекурсивной функцией как с циклом в процедурном языке.</p>
<p>Взгляните на <em>Распечатку 10</em> примера с ценами с Tail Recursion.</p>
<h4>Распечатка 10. Проход по узлам с использованием Tail Recursion</h4>
<pre><code class="language-xml">&lt;xsl:template name=&quot;priceSumTail&quot;&gt;
  &lt;xsl:param name=&quot;productList&quot;/&gt;
  &lt;xsl:param name=&quot;result&quot; select=&quot;0&quot;/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test=&quot;$productList&quot;&gt;
      &lt;xsl:call-template name=&quot;priceSumTail&quot;&gt;
        &lt;xsl:with-param name=&quot;productList&quot;
          select=&quot;$productList[position() &gt; 1]&quot;/&gt;
        &lt;xsl:with-param name=&quot;result&quot;
          select=&quot;$result +
                  number(substring-after($productList[1]/Price,'</div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

))&quot;/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;$result&quot;/&gt;&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Прибавление дополнительного значения переменной создаёт всю разницу. Вместо накомления чисел для сложения на разных рекурсивных шагах, сложение производится на каждом этапе и результат передаётся дальше как параметр для следующего шага рекурсии. Токовый XSLT-процессор просто перезаписывает участок памяти, содержащий значение переменной, при каждом вызове так же, как эта переменная перезаписывалась бы в случае Java или C кода. Этот способ позволяет языку пользоваться преимуществами и декларативных, и императивных языков без изменения сути XSLT как языка программирования.</p>
<h2>Заключение</h2>
<p>Как только вы поняли рекурсию, декларативный стиль программирования на XSLT будет не препятствием, а эффективным путем расширения возможностей преобразования XML. Остаётся единственный вопрос - какой тип рекурсии лучший для каждой отдельно взятой ситуации.</p>
<p>Вообще, задачи, работающие для малых объёмов данных, не требуют применения какой-либо из этих оптимизационных техник. Хотя, если малость объёма данных не гарантирована, выбор ограничен технологией, используемой в преобразовании. Если ваш XSLT-процессор распознаёт Tail Recursion, то лучше всего использовать этот способ. Если вы не можете убедиться, что преобразовательня технология умеет распознавать Tail Recursion, то наиболее предпочтительна комбинированная техника. Пороговое значение обычно лежит в диапазоне от 5 до 30 в зависимости от задачи.</p>
<p>Поначалу рекурсия может быть трудной для понимания идеей, но её полезность и элегантность становятся яснее по мере использования.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Эффективное использование рекурсии в XSL">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/xslt-recursion/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/xslt-recursion/</link><guid isPermaLink="true">http://varya.me/ru/posts/xslt-recursion/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Sat, 01 Aug 2009 00:00:00 GMT</pubDate></item><item><title><![CDATA[XSLT - результативные технологии программирования]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>XSLT - результативные технологии программирования</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="XSLT - результативные технологии программирования" property="og:title"/>
        <meta content="XSLT - результативные технологии программирования" property="og:description"/>
        <meta content="http://varya.me/ru/posts/efficient_xslt_techniques/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">XSLT - результативные технологии программирования</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 7/25/2009</span><div><p>Перевод документа <a href="http://www.xml.org/sites/www.xml.org/files/xslt_efficient_programming_techniques.pdf">XSLT - Efficient Programming
Techniques</a>,
который мне очень помог.</p>
<p>С ростом популярности XML как средства взаимодействия с различными системами,
все больше и больше организаций приходят к XML, чтобы решить свои вопросы
функциональной совместимости.<excerpt/> Вместе с попытками архитекторов достигнуть ясного
разделения между отображением и бизнес-логикой, XSLT становится важнее. XSL, по
сути, - это XML-документ (дерево, согласно спецификации DTD), который
применяется к древовидным структурам данных (XML-документ), чтобы выработать
результирующее дерево.</p>
<p>Эта статья представляет список лучших приемов, используемых для написания
XSLT-преобразований. Эта статья может быть использована как направление к
лучшему пути достижения нужных результатов в XSL. Она предназначается для
разработчиков, которые знакомы с основами XSL, но нуждаются в указателе на
действенный путь программирования на XSL. Информация в этой статье основана на
моём собственном опыте в XML и XSL. Список лучших приемов составлен по различным
источникам, чтобы сделать всеобъемлющий документ, который будет расти, если
найдётся больше хороших приемов. Если у вас есть несколько очень хороших
приёмов, которым вы следуете и которых нет в этом списке, скиньте мне на email
<em><a href="mailto:pboundre@gr.com">pboundre@gr.com</a></em>.</p>
<h2>Подключение внешних файлов - правильный путь</h2>
<p>Есть три способа включения внешних файлов в ваш xsl:</p>
<p>Если у вас есть дополнительные HTML-файлы, которые вы хотите включить в ваш
результат без изменений, возможно самый простой путь получить его в вашем
результирующем дереве - это включить его как внешнюю синтаксическую сущность
(entity) в преобразование. Это влечет за собой объявление сущности и
обращение к ней в вашем преобразовании.</p>
<p><strong><code>header.html</code>:</strong></p>
<pre><code class="language-html">&lt;table&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;&lt;a href=&quot;/movies/&quot;&gt;Movies&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;&lt;a href=&quot;/shop/&quot;&gt;Shop&lt;/a&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</code></pre>
<p><strong><code>data.xsl</code>:</strong></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE xsl:stylesheet [
&lt;!-- declares header.html as an external parsed entity
--&gt;
&lt;!ENTITY header SYSTEM &quot;header.html&quot;&gt;
]&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;
    &lt;xsl:template match=&quot;/&quot;&gt;
        &lt;html&gt;
            &lt;head&gt;&lt;title&gt;People&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt;
            &lt;!-- includes header.html directly --&gt;
            &amp;header;
            &lt;xsl:apply-templates /&gt;
            &lt;/body&gt;
        &lt;/html&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Или у вас есть дополнительные XML-файле, которые вы хотели бы преобразовать и
включить в документ, над которым вы работаете.</p>
<p>Если у вас есть XML-файл, который вы хотели бы включить в результат, вам нужно
использовать функцию <code>document()</code>, чтобы поучить доступ к информации, и вам нужны
шаблоны в вашем преобразовании, чтобы обработать их и включить в результирующее
дерево:</p>
<p><strong><code>header.xml</code>:</strong></p>
<pre><code class="language-xml">&lt;menu&gt;
    &lt;item href=&quot;/&quot;&gt;Home&lt;/item&gt;
    &lt;item href=&quot;/movies/&quot;&gt;Movies&lt;/item&gt;
    &lt;item href=&quot;/shop/&quot;&gt;Shop&lt;/item&gt;
&lt;/menu&gt;
</code></pre>
<p><strong><code>data.xsl</code>:</strong></p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;
    &lt;xsl:template match=&quot;/&quot;&gt;
        &lt;html&gt;
            &lt;head&gt;&lt;title&gt;People&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt;
                &lt;!-- applies templates to the information contained in
                header.xml --&gt;
                &lt;xsl:apply-templates select=&quot;document('header.xml')&quot;/&gt;

                &lt;!-- applies templates to the input file --&gt;
                &lt;xsl:apply-templates /&gt;
            &lt;/body&gt;
        &lt;/html&gt;
    &lt;/xsl:template&gt;

    &lt;!-- transforms the XML in header.xml into the table we want --&gt;
    &lt;xsl:template match=&quot;menu&quot;&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;xsl:for-each select=&quot;item&quot;&gt;
                    &lt;td&gt;&lt;a href=&quot;{@href}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
                &lt;/xsl:for-each&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Или же у вас есть внешние дополнительные XSLT-файлы, которые вы бы хотели
использовать, чтобы формировать результирующее дерево:<br/>
Пусть у вас есть входящий XML-документ, который включает включает некоторую
информацию, нужную вам как и остальные данные на странице, вы захотите
импортировать (import) или включить (include) преобразования для них, так чтобы
шаблоны, определённые в них использовались будто они часть основного
преобразования. То, что вам нужно: <code>xsl:import</code> или <code>xsl:include</code> - зависит от того,
хотите ли вы переопределять шаблоны (или часть из них), которые заданы во
включаемом преобразовании. Если хотите, используйте xsl:import, в противном
случае - <code>xsl:include</code>.</p>
<p><strong><code>data.xml</code>:</strong></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;doc&gt;
    &lt;menu&gt;
        &lt;item href=&quot;/&quot;&gt;Home&lt;/item&gt;
        &lt;item href=&quot;/movies/&quot;&gt;Movies&lt;/item&gt;
        &lt;item href=&quot;/shop/&quot;&gt;Shop&lt;/item&gt;
    &lt;/menu&gt;
    &lt;people&gt;
        &lt;person age=&quot;50&quot; name=&quot;larry&quot;/&gt;
        &lt;person age=&quot;50&quot; name=&quot;larry&quot;/&gt;
    &lt;/people&gt;
&lt;/doc&gt;
</code></pre>
<p><strong><code>header.xsl</code>:</strong></p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

  &lt;xsl:template match=&quot;menu&quot;&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;xsl:for-each select=&quot;item&quot;&gt;
          &lt;td&gt;&lt;a href=&quot;{@href}&quot;&gt;&lt;xsl:value-of select=&quot;.&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
        &lt;/xsl:for-each&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
<p><strong><code>data.xsl</code>:</strong></p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

  &lt;!-- includes the templates from header.xsl stylesheet --&gt;
  &lt;xsl:include href=&quot;header.xsl&quot; /&gt;

  &lt;xsl:template match=&quot;/&quot;&gt;
    &lt;html&gt;
      &lt;head&gt;&lt;title&gt;People&lt;/title&gt;&lt;/head&gt;
      &lt;body&gt;

        &lt;!-- applies templates to the menu definition to create the
          header - the templates come from header.xsl --&gt;
        &lt;xsl:apply-templates select=&quot;doc/menu&quot; /&gt;

        &lt;!-- applies templates to the data to create the rest of the
          document --&gt;
        &lt;xsl:apply-templates select=&quot;doc/people&quot; /&gt;

      &lt;/body&gt;
    &lt;/html&gt;
  &lt;/xsl:template&gt;
  ...

&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Вам также стоит иметь преобразование, включающее шаблоны для видоизменения
информации в что-то, что вам нужно.</p>
<h2>Используйте XSL шаблоны проектирования (patterns)</h2>
<h3>Метод Кая для нахождения пересечения, разности и дизъюнкции множеств</h3>
<p>Единственная операция над множествами, предоставляемая XSLT, - это объединение.
Оно может быть описано с использованием оператора объединения из XPath и XSLT -
&quot;<code>|</code>&quot;. Можно выразить пересечение двух наборов узлов (node set) на чистом XPath.
Этот способ был открыт Майклом Каем (Michael Kay) и известен как метод Кая
(Kaysian method).</p>
<pre><code class="language-xslt">&lt;xsl:variable name=&quot;intersection&quot; select=&quot;$ns[count(.|$ns2) = count ($ns2)]&quot;/&gt;

&lt;xsl:variable name=&quot;set-difference&quot; select=&quot;$ns1[count(.|$ns2) != count($ns2)]&quot;/&gt;
</code></pre>
<p>Пример:</p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                xmlns:data=&quot;crane&quot; version=&quot;1.0&quot;&gt;
    &lt;xsl:output method=&quot;text&quot;/&gt;
    &lt;data:data&gt; &lt;!--data source for testing purposes--&gt;
        &lt;item&gt;1&lt;/item&gt;&lt;item&gt;2&lt;/item&gt;&lt;item&gt;3&lt;/item&gt;
        &lt;item&gt;4&lt;/item&gt;&lt;item&gt;5&lt;/item&gt;&lt;item&gt;6&lt;/item&gt;
    &lt;/data:data&gt;

    &lt;xsl:template match=&quot;/&quot;&gt; &lt;!--root rule--&gt;
        &lt;xsl:variable name=&quot;ns1&quot; select=&quot;//item[position()&gt;1]&quot;/&gt;
        &lt;xsl:variable name=&quot;ns2&quot; select=&quot;//item[position()&amp;lt;5]&quot;/&gt;

        &lt;xsl:for-each select=&quot;$ns1[count(.|$ns2)=count($ns2)]&quot;&gt;
            Intersection: &lt;xsl:value-of select=&quot;.&quot;/&gt;
        &lt;/xsl:for-each&gt;

        &lt;xsl:for-each select=&quot;(
                        $ns1[count(.|$ns2)!=count($ns2)] |
                        $ns2[count(.|$ns1)!=count($ns1)]
                        )&quot;&gt;
            Difference: &lt;xsl:value-of select=&quot;.&quot;/&gt;
        &lt;/xsl:for-each&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Результат:</p>
<pre><code>Intersection: 2
Intersection: 3
Intersection: 4
Difference: 1
Difference: 5
Difference: 6
</code></pre>
<h3>Метод Вендела Пая для нерекурсивного цикла</h3>
<p>Метод Вендела Пая (Wendell Pie) демонстрирует способ избежать XSLT-рекурсии при
применении циклов.</p>
<p>Пример:</p>
<pre><code class="language-xml">&lt;Tag ID=&quot;1&quot;&gt;
    &lt;Value&gt;4&lt;/Value&gt;
&lt;/Tag&gt;
&lt;Tag ID=&quot;2&quot;&gt;
    &lt;Value&gt;2&lt;/Value&gt;
&lt;/Tag&gt;
</code></pre>
<p>Требующийся результат:</p>
<pre><code class="language-html">&lt;TABLE&gt;
    &lt;TR ID=&quot;1&quot;&gt;
        &lt;TD&gt; &lt;/TD&gt;
        &lt;TD&gt; &lt;/TD&gt;
        &lt;TD&gt; &lt;/TD&gt;
        &lt;TD&gt; &lt;/TD&gt;
    &lt;/TR&gt;
&lt;/TABLE&gt;
&lt;TABLE&gt;
    &lt;TR ID=&quot;2&quot;&gt;
        &lt;TD&gt; &lt;/TD&gt;
        &lt;TD&gt; &lt;/TD&gt;
    &lt;/TR&gt;
&lt;/TABLE&gt;
</code></pre>
<p>Другими словами, я хочу создать набор новых узлов, количество которых основано
на значении Value, содержащемся в документе. Ниже я представляю маленькое
обобщение,  которое не  зависит от числа узлов в исходном XML-документе и
использует вместо этого число узлов в преобразовании:</p>
<pre><code class="language-xslt">&lt;xsl:template match=&quot;TAG&quot;&gt;
&lt;TABLE&gt;
  &lt;TR ID=&quot;@ID&quot;&gt;
    &lt;xsl:for-each select=&quot;(document('')//*)[position() &amp;lt;= Value]&quot;&gt;
      &lt;TD&gt; &lt;/TD&gt;
    &lt;/xsl:for-each&gt;
  &lt;/TR&gt;
&lt;/TABLE&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Здесь используется количество элементов в преобразовании. Это количество будет
значительно превышено, если мы будем проверять на разные типы узлов, например:</p>
<pre><code class="language-xslt">&lt;xsl:for-each
  select=&quot;($st//node()| $st//@* | $st//namespace::*) [position() &amp;lt;= Value]&quot;&gt;
</code></pre>
<p>где <code>$st</code> определено как  <code>document('')</code>, то есть корневой узел преобразования.</p>
<h3>Метод условной выборки Оливера Беккера</h3>
<p>Воможность XPath выбирать список узлов, основываясь на сложных условиях, очень
мощная. Хотя ей недостаёт возможностей для определения строки как
противоположного набору узлов. Вам часто нужно использовать навороченную
xsl:choose конструкцию только чтобы определить, что-то вроде &quot;в случае 1
используй строку 1, в случае 2 - строку 2, ..., в случае N - строку N.?</p>
<p>Во всех таких случаях нам нужен способ, который позволил бы нам определять в
XPath-выражении строку, которая зависит от условия или условий.</p>
<p>Теперь о том, как это сделать:<br/>
Мы хотим получить XPath-выражение, которое возвращает строку, когда некоторое
заданное условие истинно, и возвращает пустую строку, если это условие ложно.
Можно условиться, что true - это &quot;1&quot;, а false - это &quot;0&quot;. Но как подогнать &quot;1&quot; к
какой-то строке? Какую функцию для работы со строкой мы могли бы использовать?
<em>substring()</em> кажется достаточно удобной. А вот и трюк: мы можем
использовать substring() только с двумя аргументами: substring(str, nOffset)
возвратит остаток строки str, начинающийся с позиции nOffset.</p>
<p>В частности:<br/></p>
<ul>
<li><code>substring(str, 1)</code> возвращает целую строку</li>
<li><code>substring(str, [очень большое число])</code> возвратит пустую строку, если это
большое число гарантированно больше, чем длина строки.</li>
</ul>
<p>Таким образом, выражение, которое мы могли бы использовать, будет:</p>
<pre><code class="language-java">concat(
    substring( str1, exp( условие ) ),
    substring( str2, exp( not(условие) ) )
)
</code></pre>
<p>и мы хотим, чтобы <code>exp(условие)</code> было 1, если условие истинное и Infinity, если
условие ложное.</p>
<p>Мы выражаем exp(условие) так:<br/>
<code>1 div условие</code>, потому что булево значение сначала преобразуется в число (true</p>
<ul>
<li>в 1, а false - в 0), мы получим в точности:</li>
</ul>
<pre><code class="language-java">exp(true) = 1
exp(false) = Infinity
</code></pre>
<p>Итог:<br/>
XPath-выражение, возвращающее одну строку, если условие истинно и другую, если
оно ложно, такое:</p>
<pre><code class="language-java">concat(
    substring(Str1, 1 div условие),
    substring(Str2, 1 div условие)
)
</code></pre>
<p>Впервые это было использовано Оливером Беккером (Oliver Becker) и названо как
метод Беккера.</p>
<p>Например:<br/>
Я хочу написать темплейт, который создаёт текст: &quot;My department&quot;,  если передан
параметр &quot;IT&quot; и текст &quot;Some other department&quot;, если значение параметра другое.</p>
<p>Конечно, никаких <code>xsl:if</code> или <code>xsl:when</code> не допускается.</p>
<p>Пример кода:</p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                xmlns:data=&quot;crane&quot; version=&quot;1.0&quot;&gt;

  &lt;xsl:output method=&quot;text&quot;/&gt;

  &lt;xsl:template match=&quot;/&quot;&gt;
    IT:
    &lt;xsl:call-template name=&quot;whoIs&quot;&gt;
      &lt;xsl:with-param name=&quot;department&quot; select=&quot;'IT'&quot; /&gt;
    &lt;/xsl:call-template&gt;
    &lt;br/&gt;
    Finance:
    &lt;xsl:call-template name=&quot;whoIs&quot;&gt;
      &lt;xsl:with-param name=&quot;department&quot; select=&quot;'Finance'&quot; /&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template name=&quot;whoIs&quot;&gt;
    &lt;xsl:param name=&quot;department&quot; select=&quot;someDepartment&quot; /&gt;
    &lt;br/&gt;
    &lt;xsl:value-of select=&quot;
      concat(
        substring('My department', 1 div ($department = 'IT')),
        substring('Some other department', 1 div not(($department = 'IT')))
      )&quot; /&gt;
    &lt;br/&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>
<h3>Используйте метод Мюнха для группировки</h3>
<p>Группировка часто плохо осуществляется в XSL. Обычно эта задача возникает, когда
вы получаете XML-вывод (несгруппированный) из базы данных и должны сгруппировать
его средствами XSL. База данных обычно выдаёт вам результаты, структурированные
согласно записям в ней. Например, давайте рассмотрим таблицу служащих, из
которой получается такой XML:</p>
<pre><code class="language-xml">&lt;data&gt;
  &lt;employee no=&quot;1&quot;&gt;
    &lt;name&gt;Prathit Bondre&lt;/name&gt;
    &lt;department&gt;IT&lt;/department&gt;
  &lt;/employee&gt;
  &lt;employee no=&quot;2&quot;&gt;
    &lt;name&gt;Adheet Bondre&lt;/name&gt;
    &lt;department&gt;Finance&lt;/department&gt;
  &lt;/employee&gt;
  &lt;employee no=&quot;3&quot;&gt;
    &lt;name&gt;Sinan Edil&lt;/name&gt;
    &lt;department&gt;IT&lt;/department&gt;
  &lt;/employee&gt;
  &lt;employee no=&quot;4&quot;&gt;
    &lt;name&gt;Jeremy King&lt;/name&gt;
    &lt;department&gt;Finance&lt;/department&gt;
  &lt;/employee&gt;
&lt;/data&gt;
</code></pre>
<p>Требуется такой вывод:</p>
<pre><code>&lt;strong&gt;Finance&lt;/strong&gt;
Adheet Bondre
Jeremy King

&lt;strong&gt;IT&lt;/strong&gt;
Prathit Bondre
Sinan Edil
</code></pre>
<p>Задача состоит в том, чтобы превратить этот плоский вывод в список,
сгруппированный по департаментам, чтобы дать требуемый результат, который
показан выше.</p>
<p>Есть два шага на пути к решению:</p>
<ul>
<li>Узнать, какие департаменты существуют</li>
<li>Получить всех служащих, которые относятся к одному департаменту</li>
</ul>
<p>Узнать, какие департаменты существуют, можно выбрав по одному сотруднику из
каждого департамента в XML, который может с успехом быть первым, кто попадётся.
Один способ найти их - это взять тех сотрудников, которые не относятся к
департаменту из множества департаментов предыдущих сотрудников.</p>
<pre><code class="language-xslt">employee[not(department = preceding-sibling::employee/department)]
</code></pre>
<p>Определив таких сотрудников, легко найти их департаменты и собрать вместе всех
сотрудников из одного и того же департамента:</p>
<pre><code class="language-xslt">&lt;xsl:apply-template
  select=&quot;data/employee[department = current()/department]&quot;/&gt;
</code></pre>
<p>Проблема этого метода в том, что он включает в себя два XPath-выражения,
вычисление которых потребует много ресурсов для больших XML-документов. Поиск по
всем предыдущим братьям с осью 'preceding-sibling' занимает много времени, если
вы ближе к конце записей. Кроме того, получение всех контактов определённых
департаментов каждый раз включает в себя поиск одного сотрудника.</p>
<h4>Метод Мюнха</h4>
<p>Этот метод разработан Стивом Мюнхом (Steve Muench) для представления этих
функций более эффективным способом с использованием ключей. Ключи работают путём
назначения значения ключа узлу и дают прямой доступ к узлу через такое значение.
Если элементов, у которых один и тот же ключ, много, то все эти элементы
найдутся, когда вы воспользуетесь этим ключом. В сущности, это означает, что
если вы хотите сгруппировать множество узлов согласно какому-то свойству узла,
вы можете использовать ключи.</p>
<p>В примере выше мы хотим сгруппировать сотрудников согласно их департаментам,
поэтому мы создаём ключ, который назначает каждому сотруднику значение ключа,
которое берётся из департамента этого сотрудника. Узлы, которые мы хотим
сгруппировать должны быть подставлены в атрибут &quot;match&quot;. Значение ключа, которые
мы хотим использовать записывается в атрибут &quot;use&quot;.</p>
<pre><code class="language-xslt">&lt;xsl:key name=&quot;employees-by-department&quot; match=&quot;employee&quot; use=&quot;department&quot;/&gt;
</code></pre>
<p>Однажды определив ключ, зная департамент, мы можем быстро получить доступ ко
всем сотрудникам этого департамента.<br/>
Например, ключ <code>key('employees-by-department', 'IT')</code> даст записи с
департаментом &quot;IT&quot;.</p>
<p>Однако, первое, что нам надо сделать,- это определить, какие бывают
департаменты, что включает в себя нахождение первого сотрудника в XML для
каждого департамента. Здесь мы снова можем использовать ключи. Мы знаем, что
сотрудник будет частью списка узлов, которые можно получить по ключу данного
департамента: вопрос в том, будет ли он первым в этом списке (который упорядочен
как записи в XML-документе) или ниже? Нас интересуют только записи, идущие
первыми в списке.<br/>
Выяснение, является ли сотрудник первым в списке, возвращённом по ключу,
подразумевает сравнение узла employee с первым узлом в списке. Этот способ также
может быть использован для получения отдельных элементов в XML-файле. Есть пара
характерных способов проверки, идентичны ли два узла:</p>
<ul>
<li>Сравнить уникальные идентификаторы, сгенерированные для узлов (используя
<code>generate-id()</code>):</li>
</ul>
<pre><code class="language-xslt">employee[generate-id() = generate-id(key('employees-by-department', department)[1])]
</code></pre>
<ul>
<li>Посмотреть, сколько узлов включает в себя результат объединения двух узлов:
один или два - узлы не могут повторяться во множестве, так что если там
только один узел, то они должны быть одним и тем же узлом:</li>
</ul>
<pre><code class="language-xslt">employee[count(.|key('employees-by-department', department)[1]) = 1]
</code></pre>
<p>Однажды определив группы, вы можете отсортировать их так, как вам нравится.
Также вы можете отсортировать узлы в рамках группы так, как вы хотите. Вот
шаблон, который создаёт результат, который мы описали, из XML, полученного из
базы данных:</p>
<pre><code class="language-xslt">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

  &lt;xsl:output method = &quot;html&quot; encoding=&quot;Windows-1252&quot; /&gt;
  &lt;xsl:key name = &quot;employees-by-department&quot; match =&quot;employee&quot; use = &quot;department&quot; /&gt;

  &lt;xsl:template match=&quot;data&quot;&gt;
    &lt;html&gt;
      &lt;head&gt;&lt;/head&gt;
      &lt;body&gt;
        &lt;xsl:for-each select = &quot;employee[count(.|key('employees-bydepartment',
department)[1])=1]&quot;&gt;
          &lt;xsl:sort select=&quot;department&quot; /&gt;
          &lt;b&gt;&lt;u&gt;&lt;xsl:value-of select=&quot;department&quot; /&gt;&lt;/u&gt;&lt;/b&gt;&lt;br/&gt;
            &lt;xsl:for-each select=&quot;key('employees-bydepartment',
department)&quot;&gt;
              &lt;xsl:sort select=&quot;name&quot;/&gt;
              &lt;xsl:value-of select=&quot;name&quot; /&gt;&lt;br/&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:for-each&gt;
        &lt;/body&gt;
      &lt;/html&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
<p>Метод Мюнха обычно лучше использовать для группировки узлов из XML-документа,
потому что он не подразумевает прохождения через большое число узлов, и поэтому
он более эффективен. Он особенно полезен, когда у вас есть плоская выдача из
базы данных, например, которую вам нужно преобразовать в какую-нибудь
иерархичную структуру. Он может быть применён в любой ситуации, где нужно
группировать узлы согласно их свойствам, которые можно получить через
XPath.</p>
<p>Обратная сторона состоит в том, что метод Мюнха будет работать только с
XSLT-процессором, поддерживающим ключи. Вдобавок, использование ключей может
быть достаточно затратным по памяти, потому что все узлы и их ключи хранятся в
памяти. Наконец, может быть трудно использовать ключи, если узлы, которые вы
хотите сгруппировать, получены из разных подключенных источников.</p>
<h2>Использование xsl:import</h2>
<p>Используйте <code>&lt;xsl:import&gt;</code>, чтобы подключить общие, основные правила в
преобразование, задуманное для определённых трансформаций. Если можете, не
импортируйте больше шаблонов, чем вам нужно.</p>
<h2>Использование статического HTML</h2>
<p>Для любых &quot;неизменных&quot; порций html на странице (таких как шапка, подвал,
элементы навигации) определённо более эффективно хранить фрагменты как внешние
xml-файлы и копировать их в результирующее дерево используя <code>xsl:copy-of</code> и
функцию <code>document()</code>, чем использовать именованные шаблоны или <code>xsl:import</code>.</p>
<h2>Разница между call и apply templates</h2>
<p>Call-template, в отличие от aplly-templates, не меняет контекстный (текущий)
узел. И атрибут select имеет значение только в aplly-templates, и не имеет в
call-template.</p>
<h2>Повторное использование кода и рефакторинг</h2>
<p>Проблема с использованием одного темплейта с множеством условий - это то, что
очень быстро делает код отвратительным, нечитаемым и неподддерживаемым. Проблема
многих шаблонов состоит в том, что вы часто дублируете код. Золотая середина -
использовать много шаблонов, а при необходимости повторить код - вызывать
именованные шаблоны, иногда с параметрами, если имеют место небольшие изменения,
которые должны быть учтены. Именованные шаблоны похожи на подпрограммы или
приватные методы.</p>
<p>Например. Допустим, вы хотите обработать элементы item, имея один шаблон для
узлов со значением атрибута type - 'Book', один - для 'CD', и один для всех
остальных.</p>
<pre><code class="language-xslt">&lt;xsl:template match=&quot;item[@type='Book']&quot;/&gt;
&lt;xsl:template match=&quot;item[@type='CD']&quot;/&gt;
&lt;xsl:template match=&quot;item&quot;/&gt;
</code></pre>
<p>И они переопределят шаблон, привязанный к &quot;*&quot; (любой элемент). Шаблоны с более
точной адресацией будут иметь более высокий приоритет для сопоставления.</p>
<p>##Автоматизируйте XSL-документацию</p>
<p>Программисты обычно ненавидят документацию и поэтому обычно не пишут её.
Javadocs в Java даёт большое утешение программистскому сообществу, обеспечивая
способ автоматически генерировать документацию. Есть похожий инструмент, который
написан для XSL и называется xsldoc. Его можно бесплатно скачать на
<a href="http://www.xsldoc.org/">www.xsldoc.org</a>.</p>
<p>Этот инструмент обеспечит автоматизированный, стандартизированный и надежный
способ создания документации о ваших XSL-файлах, и поскольку он управляется из
командной строки, то может стать частью процесса сборки.</p>
<p>##Не изобретайте велосипед, используйте XSLT-библиотеку</p>
<p>XSLT-библиотека - это open source репозиторий XSL-шаблонов, которые были
написаны и проверены. В библиотеке множество шаблонов для работы со строками,
датами, обработки узлов и т.п., что может быть эффективно использовано в ваших
xsl-файлах. Так что сэкономьте своё время с этой библиотекой. Её можно
посмотреть по адресу <a href="http://xsltsl.sourceforge.net">http://xsltsl.sourceforge.net</a>.</p>
<h2>Уменьшайте размер ваших HTML-документов</h2>
<p>Уменьшайте размер вашего HTML, используя <code>indent=&quot;no&quot;</code> в теге
<code>&lt;xsl:output/&gt;</code>. Этот атрибут сообщает XSLT-процессору не делать отступы в
HTML-документе, что делает файлы меньше и они грузятся быстрее.</p>
<pre><code class="language-xslt">&lt;xsl:output method=&quot;html&quot; indent=&quot;no&quot;/&gt;
</code></pre>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for XSLT - результативные технологии программирования">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/efficient_xslt_techniques/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/efficient_xslt_techniques/</link><guid isPermaLink="true">http://varya.me/ru/posts/efficient_xslt_techniques/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Sat, 25 Jul 2009 00:00:00 GMT</pubDate></item><item><title><![CDATA[Простые числа и XPath]]></title><description><![CDATA[<!doctype html>
<html class='no-js' lang=ru>
    <head>
        <title>Простые числа и XPath</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
        <!-- assets-head -->
        <meta content="Простые числа и XPath" property="og:title"/>
        <meta content="Простые числа и XPath" property="og:description"/>
        <meta content="http://varya.me/ru/posts/xpath-prime-numbers/" property="og:url"/>
        <meta content="{{thumb}}" property="og:image"/>
        <meta property="og:locale" content="ru_RU"/>
        <meta property="og:site_name" content="var ya;"/>
        <meta property="og:type" content="article"/>
        <meta property="article:author" content="https://www.facebook.com/toivonens"/>
        <script>
            (function(d, s, l, r) {
            if (typeof(s) !== 'undefined' && l.getItem('varya.me.fonts')) {
                r = [
                    '<style>',
                    l.getItem('varya.me.fonts'),
                    '</style>'
                ];
                document.write(r.join(''));
            }

            })(document, Storage, localStorage);
        </script>
    </head>
    <body class="page">
        <div id='contents'><div><header class="style__header___7cFNF"><div class="style__left___1nLlV" id="Header-Left"></div><div class="style__center___265v6"><logo class="style__logo___2yXgh">⋅⋅⋅<b class="style__var___11qBW">var</b>⋅<b class="style__ya___8D8Xm">ya</b>;<b class="style__cursor___2aaLd"></b></logo></div><div class="style__right___1RRr2" id="Header-Right"></div></header><div class="style__layout___2Ynks"><section class="style__main___1PTuI"><ul class="style__switcher___2YMLp"><li class="style__lang___kggY_"><a href="/" class="style__link___1ZFL2">en</a></li><li class="style__lang___kggY_">ru</li></ul><div class="style__article___2FW-a" role="main"><div class="style__body___XvMI0"><h1 class="style__header___ADINy">Простые числа и XPath</h1></div><div class="style__text___1aEP8"><div class="style__share___2UNWm"><script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script><span class="yashare-auto-init" data-yashareQuickServices="twitter,facebook,gplus,vkontakte" data-yashareL10n="ru" data-yashareTheme="counter"></span></div><span class="style__details___ZaSIa author vcard">Опубликовано 6/21/2009</span><div><p>Иногда мы на работе решаем интересные задачки. Вот, например, одна (почти первая) в постановке
<a href="http://alpha-san.ya.ru/"><span style="color: #000000;"><strong><span style="color: #ff0000;">n</span>op`а</strong></span></a>:
<excerpt/></p>
<h2>Частный случай</h2>
<p>Дан такой xml:</p>
<pre><code class="language-xml">&lt;items&gt;
  &lt;item&gt;1&lt;/item&gt;
  &lt;item&gt;2&lt;/item&gt;
  ...
  &lt;item&gt;N-1&lt;/item&gt;
  &lt;item&gt;N&lt;/item&gt;
&lt;/items&gt;
</code></pre>
<p>т.е. выписаны все натуральные числа от 1 до N включительно. Про N ничего заранее не известно --
большое, маленькое, еще какое-то — мы не знаем.</p>
<p>Нужно. Написать <strong>xpath</strong>, выбирающий все item'ы с простыми числами.
Подчеркиваю - <strong>xpath</strong>.
Т.е. внутри тега xsl:stylesheet должен быть один примерно такой шаблон:</p>
<pre><code class="language-xslt">&lt;xsl:template match=&quot;/&quot;&gt;
  &lt;xsl:copy-of select=&quot;.......&quot;/&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>и больше ничего — ни переменных, ни других шаблонов, ни функций.</p>
<p>На выходе будет что-то типа:</p>
<pre><code class="language-xml">&lt;item&gt;2&lt;/item&gt;
&lt;item&gt;3&lt;/item&gt;
&lt;item&gt;5&lt;/item&gt;
&lt;item&gt;7&lt;/item&gt;
...
</code></pre>
<p>Решение следующее:</p>
<pre><code class="language-xslt">&lt;xsl:template match=&quot;/&quot;&gt;
  &lt;items&gt;
    &lt;xsl:copy-of
      select=&quot;items/item[
        not(preceding-sibling::item[(last() + 1) mod . = 0 and . != 1])
        and
        . != 1
      ]&quot;/&gt;
  &lt;/items&gt;
&lt;/xsl:template&gt;
</code></pre>
<h2>Общая задача</h2>
<p>Усложненный вариант — все тоже самое, но в xml просто набор item'ов с какими-то натуральными числами
в каком-то порядке, например:</p>
<pre><code class="language-xml">&lt;items&gt;
  &lt;item&gt;142&lt;/item&gt;
  &lt;item&gt;73&lt;/item&gt;
  &lt;item&gt;10000341&lt;/item&gt;
  &lt;item&gt;10&lt;/item&gt;
  ...
&lt;/items&gt;
</code></pre>
<p>Решение:</p>
<pre><code class="language-xslt">&lt;xsl:template match=&quot;/&quot;&gt;
  &lt;items&gt;
    &lt;xsl:copy-of select=&quot;items/item[
      not(
        str:tokenize(str:padding(. - 1, '1'), '')[
          (last() + 1 ) mod position()= 0
          and position() != 1
        ]
      ) and . != 1
      ]&quot;/&gt;
  &lt;/items&gt;
&lt;/xsl:template&gt;
</code></pre>
<p>Чтобы понять, что тут делается, надо прочитать про функции
<a href="http://exslt.org/str/functions/padding/index.html">padding</a> и
<a href="http://exslt.org/str/functions/tokenize/index.html">tokenize</a> на EXSLT.org.</p>
</div></div></div><div class="style__comments___3emEu"><div class="style__body___2Pjpr"><h4 class="style__header___8JJlc">Комментарии</h4></div><div class="style__island___6Bc3W"><div><div id="disqus_thread"></div><script>
                      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                      var disqus_shortname = 'varya'; // required: replace example with your forum shortname

                      /* * * DON'T EDIT BELOW THIS LINE * * */
                      (function() {
                          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                      })();
                  </script></div></div></div><div class="style__related___3zKIm"><div class="style__body___2uz87"><h4 class="style__header___1WzCe">Кстати</h4></div><div class="style__island___1W8YU"><a href="https://github.com/varya/varya.github.com/issues/new?title=Feedback for Простые числа и XPath">Создайте для меня issue на GitHub</a>, если вы заметили ошибку или хотите дополнить статью. Или вы можете <a href="https://github.com/varya/varya.github.com/edit/develop/content/posts/xpath-prime-numbers/index_ru.md">отредактировать пост самостоятельно и послать мне патч</a>.</div></div></section><nav class="style__sidebar___2nkwz"><ul class="style__menu___-uZzl"><h3 class="style__title___3mAfQ">На этом сайте</h3><li class="style__item___2LuN-"><a href="/ru/posts/" class="style__link___1ZFL2">Тех блог</a></li><li class="style__item___2LuN-"><a href="/ru/content/" class="style__link___1ZFL2">Статьи и презентации</a></li><li class="style__item___2LuN-"><a href="/ru/" class="style__link___1ZFL2">Обо мне</a></li><li class="style__item___2LuN-"><a href="/ru/life/" class="style__link___1ZFL2">Про жизнь</a></li></ul><div id="GitHub"></div></nav><aside class="style__prompt___1WAf7"><ul class="style__socialIco___14rtL"><li class="style__item___24Oaa"><ul class="style__feeds___lx7IA"><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/en/feed.xml" title="New on Varya.me in English">en</a></li><li class="style__item___24Oaa"><a class="style__rssText___1S0Bk" href="/ru/feed.xml" title="Новые записи на Varya.me">ru</a></li></ul><a class="style__rss___2lUOQ style__ico___1PWaR" href="/feed.xml" title="New on Varya.me"></a></li><li class="style__item___24Oaa"><a class="style__twitter___3GPQl style__ico___1PWaR" href="https://twitter.com/varya_en" title="@varya_en" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__github___2GmrH style__ico___1PWaR" href="https://github.com/varya" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__facebook___2SOVV style__ico___1PWaR" href="http://www.facebook.com/varvara.stepanova.9" target="_blank"></a></li><li class="style__item___24Oaa"><a class="style__linkedin___2NaTD style__ico___1PWaR" href="http://www.linkedin.com/pub/varvara-stepanova/30/72a/96b" target="_blank"></a></li></ul></aside></div><div class="style__outer___1U8mi"><footer class="style__footer___2MbLi"><div class="style__left___2vtHv"></div><div class="style__center___1Ffk8"><a href="http://varya.me">© 2017 Varya Stepanova</a> <a href="https://twitter.com/varya_en" title="@varya_en"><img alt="Twitter" class="ico" src="http://favicon.yandex.net/favicon/twitter.com" title="Twitter"/> Follow me on Twitter!</a></div><div class="style__right___H7yIL"></div></footer></div></div></div>

        <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20478625 = new Ya.Metrika({id:20478625, clickmap:true, trackLinks:true, accurateTrackBounce:true, trackHash:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/20478625" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
        <!-- assets-body -->
    </body>
</html>

]]></description><link>http://varya.me/ru/posts/xpath-prime-numbers/</link><guid isPermaLink="true">http://varya.me/ru/posts/xpath-prime-numbers/</guid><category><![CDATA[frontend]]></category><category><![CDATA[ui]]></category><category><![CDATA[react]]></category><category><![CDATA[redux]]></category><category><![CDATA[javascript]]></category><category><![CDATA[js]]></category><pubDate>Sun, 21 Jun 2009 00:00:00 GMT</pubDate></item></channel></rss>